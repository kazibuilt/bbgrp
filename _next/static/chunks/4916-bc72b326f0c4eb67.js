(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4916],{4591:function(e,t,r){"use strict";function pTimeout(e,t){return new Promise(function(r,n){var i=setTimeout(function(){n(Error("Promise timed out"))},t);e.then(function(e){return clearTimeout(i),r(e)}).catch(n)})}function invokeCallback(e,t,r){var cb=function(){try{return Promise.resolve(t(e))}catch(e){return Promise.reject(e)}};return new Promise(function(e){return setTimeout(e,r)}).then(function(){return pTimeout(cb(),1e3)}).catch(function(t){null==e||e.log("warn","Callback Error",{error:t}),null==e||e.stats.increment("callback_error")}).then(function(){return e})}r.d(t,{FJ:function(){return pTimeout},UI:function(){return invokeCallback}})},98191:function(e,t,r){"use strict";r.d(t,{Y:function(){return ContextCancelation},_:function(){return u}});var n=r(59108),i=r(96475),o=r(97582),s=function(){function CoreLogger(){this._logs=[]}return CoreLogger.prototype.log=function(e,t,r){var n=new Date;this._logs.push({level:e,message:t,time:n,extras:r})},Object.defineProperty(CoreLogger.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),CoreLogger.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(e,t){var r,n,i,s=(0,o.pi)((0,o.pi)({},t),{json:JSON.stringify(t.extras,null," "),extras:t.extras});delete s.time;var a=null!==(i=null===(n=t.time)||void 0===n?void 0:n.toISOString())&&void 0!==i?i:"";return e[a]&&(a="".concat(a,"-").concat(Math.random())),(0,o.pi)((0,o.pi)({},e),((r={})[a]=s,r))},{});console.table?console.table(e):console.log(e)}else this.logs.forEach(function(e){var t=e.level,r=e.message,n=e.extras;"info"===t||"debug"===t?console.log(r,null!=n?n:""):console[t](r,null!=n?n:"")});this._logs=[]},CoreLogger}(),a=r(50732),ContextCancelation=function(e){var t,r,n;this.retry=null===(t=e.retry)||void 0===t||t,this.type=null!==(r=e.type)&&void 0!==r?r:"plugin Error",this.reason=null!==(n=e.reason)&&void 0!==n?n:""},u=function(){function CoreContext(e,t,r,i){void 0===t&&(t=(0,n.v4)()),void 0===r&&(r=new a.i),void 0===i&&(i=new s),this.attempts=0,this.event=e,this._id=t,this.logger=i,this.stats=r}return CoreContext.system=function(){},CoreContext.prototype.isSame=function(e){return e.id===this.id},CoreContext.prototype.cancel=function(e){if(e)throw e;throw new ContextCancelation({reason:"Context Cancel"})},CoreContext.prototype.log=function(e,t,r){this.logger.log(e,t,r)},Object.defineProperty(CoreContext.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),CoreContext.prototype.updateEvent=function(e,t){var r;if("integrations"===e.split(".")[0]){var n=e.split(".")[1];if((null===(r=this.event.integrations)||void 0===r?void 0:r[n])===!1)return this.event}return(0,i.N)(this.event,e,t),this.event},CoreContext.prototype.failedDelivery=function(){return this._failedDelivery},CoreContext.prototype.setFailedDelivery=function(e){this._failedDelivery=e},CoreContext.prototype.logs=function(){return this.logger.logs},CoreContext.prototype.flush=function(){this.logger.flush(),this.stats.flush()},CoreContext.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},CoreContext}()},5212:function(e,t,r){"use strict";r.d(t,{Q:function(){return n}});var n=function(){function Emitter(){this.callbacks={}}return Emitter.prototype.on=function(e,t){return this.callbacks[e]?this.callbacks[e].push(t):this.callbacks[e]=[t],this},Emitter.prototype.once=function(e,t){var r=this,on=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];r.off(e,on),t.apply(r,n)};return this.on(e,on),this},Emitter.prototype.off=function(e,t){var r,n=(null!==(r=this.callbacks[e])&&void 0!==r?r:[]).filter(function(e){return e!==t});return this.callbacks[e]=n,this},Emitter.prototype.emit=function(e){for(var t,r=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(null!==(t=this.callbacks[e])&&void 0!==t?t:[]).forEach(function(e){e.apply(r,n)}),this},Emitter}()},51181:function(e,t,r){"use strict";r.d(t,{M:function(){return o},Z:function(){return s}});var n=r(97582),i=r(5212),o="onRemoveFromFuture",s=function(e){function PriorityQueue(t,r,n){var i=e.call(this)||this;return i.future=[],i.maxAttempts=t,i.queue=r,i.seen=null!=n?n:{},i}return(0,n.ZT)(PriorityQueue,e),PriorityQueue.prototype.push=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.map(function(t){return!(e.updateAttempts(t)>e.maxAttempts||e.includes(t))&&(e.queue.push(t),!0)});return this.queue=this.queue.sort(function(t,r){return e.getAttempts(t)-e.getAttempts(r)}),n},PriorityQueue.prototype.pushWithBackoff=function(e){var t,r,n,i,s=this;if(0===this.getAttempts(e))return this.push(e)[0];var a=this.updateAttempts(e);return!(a>this.maxAttempts||this.includes(e))&&(setTimeout(function(){s.queue.push(e),s.future=s.future.filter(function(t){return t.id!==e.id}),s.emit(o)},(r=(t={attempt:a-1}).minTimeout,Math.min((Math.random()+1)*(void 0===r?500:r)*Math.pow(void 0===(n=t.factor)?2:n,t.attempt),void 0===(i=t.maxTimeout)?1/0:i))),this.future.push(e),!0)},PriorityQueue.prototype.getAttempts=function(e){var t;return null!==(t=this.seen[e.id])&&void 0!==t?t:0},PriorityQueue.prototype.updateAttempts=function(e){return this.seen[e.id]=this.getAttempts(e)+1,this.getAttempts(e)},PriorityQueue.prototype.includes=function(e){return this.queue.includes(e)||this.future.includes(e)||!!this.queue.find(function(t){return t.id===e.id})||!!this.future.find(function(t){return t.id===e.id})},PriorityQueue.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(PriorityQueue.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(PriorityQueue.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),PriorityQueue}(i.Q)},69147:function(e,t,r){"use strict";r.d(t,{a:function(){return attempt},z:function(){return ensure}});var n=r(97582),i=r(98191);function attempt(e,t){e.log("debug","plugin",{plugin:t.name});var r=new Date().getTime(),o=t[e.event.type];return void 0===o?Promise.resolve(e):(function(e){return(0,n.mG)(this,void 0,void 0,function(){return(0,n.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:return[2,t.sent()];case 2:return[2,Promise.reject(t.sent())];case 3:return[2]}})})})(function(){return o.apply(t,[e])}).then(function(e){var n=new Date().getTime()-r;return e.stats.gauge("plugin_time",n,["plugin:".concat(t.name)]),e}).catch(function(r){if(r instanceof i.Y&&"middleware_cancellation"===r.type)throw r;return r instanceof i.Y?e.log("warn",r.type,{plugin:t.name,error:r}):(e.log("error","plugin Error",{plugin:t.name,error:r}),e.stats.increment("plugin_error",1,["plugin:".concat(t.name)])),r})}function ensure(e,t){return attempt(e,t).then(function(t){if(t instanceof i._)return t;e.log("debug","Context canceled"),e.stats.increment("context_canceled"),e.cancel(t)})}},50732:function(e,t,r){"use strict";r.d(t,{i:function(){return o},s:function(){return i}});var n=r(97582),i=function(){function CoreStats(){this.metrics=[]}return CoreStats.prototype.increment=function(e,t,r){void 0===t&&(t=1),this.metrics.push({metric:e,value:t,tags:null!=r?r:[],type:"counter",timestamp:Date.now()})},CoreStats.prototype.gauge=function(e,t,r){this.metrics.push({metric:e,value:t,tags:null!=r?r:[],type:"gauge",timestamp:Date.now()})},CoreStats.prototype.flush=function(){var e=this.metrics.map(function(e){return(0,n.pi)((0,n.pi)({},e),{tags:e.tags.join(",")})});console.table?console.table(e):console.log(e),this.metrics=[]},CoreStats.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:({gauge:"g",counter:"c"})[e.type],e:e.timestamp}})},CoreStats}(),o=function(e){function NullStats(){return null!==e&&e.apply(this,arguments)||this}return(0,n.ZT)(NullStats,e),NullStats.prototype.gauge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},NullStats.prototype.increment=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},NullStats.prototype.flush=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},NullStats.prototype.serialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return[]},NullStats}(i)},55469:function(e,t,r){"use strict";function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isFunction(e){return"function"==typeof e}function exists(e){return null!=e}function isPlainObject(e){return"object"===Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}r.d(t,{Gg:function(){return exists},HD:function(){return isString},PO:function(){return isPlainObject},hj:function(){return isNumber},mf:function(){return isFunction}})},37370:function(e,t,r){"use strict";r.d(t,{b:function(){return ec}});var n,i,o=r(97582),s=r(34155);function getProcessEnv(){return void 0!==s&&s.env?s.env:{}}var a=r(99382),u=r(55609),c=r(55469);function resolveArguments(e,t,r,n){var i,o=[e,t,r,n],s=(0,c.PO)(e)?e.event:e;if(!s||!(0,c.HD)(s))throw Error("Event missing");var a=(0,c.PO)(e)?null!==(i=e.properties)&&void 0!==i?i:{}:(0,c.PO)(t)?t:{},u={};return(0,c.mf)(r)||(u=null!=r?r:{}),(0,c.PO)(e)&&!(0,c.mf)(t)&&(u=null!=t?t:{}),[s,a,u,o.find(c.mf)]}function resolvePageArguments(e,t,r,n,i){var o,s,a=null,u=null,l=[e,t,r,n,i],h=l.filter(c.HD);void 0!==h[0]&&void 0!==h[1]&&(a=h[0],u=h[1]),1===h.length&&(a=null,u=h[0]);var p=l.find(c.mf),d=l.filter(function(e){return null===u?(0,c.PO)(e):(0,c.PO)(e)||null===e}),f=null!==(o=d[0])&&void 0!==o?o:{},y=null!==(s=d[1])&&void 0!==s?s:{};return[a,u,f,y,p]}var resolveUserArguments=function(e){return function(){for(var t,r,n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var s={},a=["callback","options","traits","id"],u=0;u<i.length;u++){var l=i[u],h=a.pop();if("id"===h){if((0,c.HD)(l)||(0,c.hj)(l)){s.id=l.toString();continue}if(null==l)continue;h=a.pop()}if(("traits"===h||"options"===h)&&(null==l||(0,c.PO)(l))&&(s[h]=l),(0,c.mf)(l)){s.callback=l;break}}return[null!==(t=s.id)&&void 0!==t?t:e.id(),null!==(r=s.traits)&&void 0!==r?r:{},null!==(n=s.options)&&void 0!==n?n:{},s.callback]}};function resolveAliasArguments(e,t,r,n){(0,c.hj)(e)&&(e=e.toString()),(0,c.hj)(t)&&(t=t.toString());var i=[e,t,r,n],o=i.filter(c.HD),s=o[0],a=void 0===s?e:s,u=o[1],l=i.filter(c.PO)[0];return[a,void 0===u?null:u,void 0===l?{}:l,i.find(c.mf)]}var l=r(65904),h=r(29784),p=r(4591),d=r(5212),f=r(59108),y=r(96475),g=r(8322),v=r.n(g),createBufferedPageContext=function(e,t,r,n,i,o){return{__t:"bpc",c:t,p:n,u:e,s:r,t:i,r:o}},m=Object.keys(createBufferedPageContext("","","","","","")),removeHash=function(e){var t=e.indexOf("#");return -1===t?e:e.slice(0,t)},parseCanonicalPath=function(e){try{return new URL(e).pathname}catch(t){return"/"===e[0]?e:"/"+e}},createPageContext=function(e){var t=e.c,r=e.p,n=e.s,i=e.u,o=e.r,s=e.t,a=t?parseCanonicalPath(t):r,u=t?t.indexOf("?")>-1?t:t+n:removeHash(i);return{path:a,referrer:o,search:n,title:s,url:u}},getDefaultBufferedPageContext=function(){var e=document.querySelector("link[rel='canonical']");return createBufferedPageContext(location.href,e&&e.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},addPageContext=function(e,t){void 0===t&&(t=createPageContext(getDefaultBufferedPageContext()));var r,n,i,s=e.context;"page"===e.type&&(i=e.properties&&(r=e.properties,n=Object.keys(t),Object.assign.apply(Object,(0,o.ev)([{}],n.map(function(e){var t;if(r&&Object.prototype.hasOwnProperty.call(r,e))return(t={})[e]=r[e],t}),!1))),e.properties=(0,o.pi)((0,o.pi)((0,o.pi)({},t),e.properties),e.name?{name:e.name}:{})),s.page=(0,o.pi)((0,o.pi)((0,o.pi)({},t),i),s.page)},b=function(){function EventFactory(e){this.user=e}return EventFactory.prototype.track=function(e,t,r,n,i){return this.normalize((0,o.pi)((0,o.pi)({},this.baseEvent()),{event:e,type:"track",properties:t,options:(0,o.pi)({},r),integrations:(0,o.pi)({},n)}),i)},EventFactory.prototype.page=function(e,t,r,n,i,s){var a,u={type:"page",properties:(0,o.pi)({},r),options:(0,o.pi)({},n),integrations:(0,o.pi)({},i)};return null!==e&&(u.category=e,u.properties=null!==(a=u.properties)&&void 0!==a?a:{},u.properties.category=e),null!==t&&(u.name=t),this.normalize((0,o.pi)((0,o.pi)({},this.baseEvent()),u),s)},EventFactory.prototype.screen=function(e,t,r,n,i,s){var a={type:"screen",properties:(0,o.pi)({},r),options:(0,o.pi)({},n),integrations:(0,o.pi)({},i)};return null!==e&&(a.category=e),null!==t&&(a.name=t),this.normalize((0,o.pi)((0,o.pi)({},this.baseEvent()),a),s)},EventFactory.prototype.identify=function(e,t,r,n,i){return this.normalize((0,o.pi)((0,o.pi)({},this.baseEvent()),{type:"identify",userId:e,traits:t,options:(0,o.pi)({},r),integrations:(0,o.pi)({},n)}),i)},EventFactory.prototype.group=function(e,t,r,n,i){return this.normalize((0,o.pi)((0,o.pi)({},this.baseEvent()),{type:"group",traits:t,options:(0,o.pi)({},r),integrations:(0,o.pi)({},n),groupId:e}),i)},EventFactory.prototype.alias=function(e,t,r,n,i){var s={userId:e,type:"alias",options:(0,o.pi)({},r),integrations:(0,o.pi)({},n)};return(null!==t&&(s.previousId=t),void 0===e)?this.normalize((0,o.pi)((0,o.pi)({},s),this.baseEvent())):this.normalize((0,o.pi)((0,o.pi)({},this.baseEvent()),s),i)},EventFactory.prototype.baseEvent=function(){var e={integrations:{},options:{}},t=this.user;return t.id()&&(e.userId=t.id()),t.anonymousId()&&(e.anonymousId=t.anonymousId()),e},EventFactory.prototype.context=function(e){var t,r,n,i=["integrations","anonymousId","timestamp","userId"],o=null!==(t=e.options)&&void 0!==t?t:{};delete o.integrations;var s=Object.keys(o),a=null!==(n=null===(r=e.options)||void 0===r?void 0:r.context)&&void 0!==n?n:{},u={};return s.forEach(function(e){"context"!==e&&(i.includes(e)?(0,y.N)(u,e,o[e]):(0,y.N)(a,e,o[e]))}),[a,u]},EventFactory.prototype.normalize=function(e,t){(null===(r=e.options)||void 0===r?void 0:r.anonymousId)&&this.user.anonymousId(e.options.anonymousId);var r,n,i,s=Object.keys(null!==(n=e.integrations)&&void 0!==n?n:{}).reduce(function(t,r){var n,i;return(0,o.pi)((0,o.pi)({},t),((n={})[r]=!!(null===(i=e.integrations)||void 0===i?void 0:i[r]),n))},{}),a=(0,o.pi)((0,o.pi)({},s),null===(i=e.options)||void 0===i?void 0:i.integrations),u=this.context(e),c=u[0],l=u[1];e.options;var h=(0,o._T)(e,["options"]),p=(0,o.pi)((0,o.pi)((0,o.pi)((0,o.pi)({timestamp:new Date},h),{context:c,integrations:a}),l),{messageId:"ajs-next-"+v().hash(JSON.stringify(e)+(0,f.v4)())});return addPageContext(p,t),p},EventFactory}(),_=r(65976),w=r(51181),k=r(98191),createTaskGroup=function(){var e,t,r=0;return{done:function(){return e},run:function(n){var i=n();return"object"==typeof i&&null!==i&&"then"in i&&"function"==typeof i.then&&(1==++r&&(e=new Promise(function(e){return t=e})),i.finally(function(){return 0==--r&&t()})),i}}},C=r(69147),S=function(e){function EventQueue(t){return e.call(this,"string"==typeof t?new _.$(4,t):t)||this}return(0,o.ZT)(EventQueue,e),EventQueue.prototype.flush=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){return(0,l.s)()?[2,[]]:[2,e.prototype.flush.call(this)]})})},EventQueue}(function(e){function CoreEventQueue(t){var r=e.call(this)||this;return r.criticalTasks=createTaskGroup(),r.plugins=[],r.failedInitializations=[],r.flushing=!1,r.queue=t,r.queue.on(w.M,function(){r.scheduleFlush(0)}),r}return(0,o.ZT)(CoreEventQueue,e),CoreEventQueue.prototype.register=function(e,t,r){return(0,o.mG)(this,void 0,void 0,function(){var n=this;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.resolve(t.load(e,r)).then(function(){n.plugins.push(t)}).catch(function(r){if("destination"===t.type){n.failedInitializations.push(t.name),console.warn(t.name,r),e.log("warn","Failed to load destination",{plugin:t.name,error:r});return}throw r})];case 1:return i.sent(),[2]}})})},CoreEventQueue.prototype.deregister=function(e,t,r){return(0,o.mG)(this,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!t.unload)return[3,2];return[4,Promise.resolve(t.unload(e,r))];case 1:i.sent(),i.label=2;case 2:return this.plugins=this.plugins.filter(function(e){return e.name!==t.name}),[3,4];case 3:return n=i.sent(),e.log("warn","Failed to unload destination",{plugin:t.name,error:n}),[3,4];case 4:return[2]}})})},CoreEventQueue.prototype.dispatch=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.push(e),t=this.subscribeToDelivery(e),this.scheduleFlush(0),[2,t]})})},CoreEventQueue.prototype.subscribeToDelivery=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t=this;return(0,o.Jh)(this,function(r){return[2,new Promise(function(r){var onDeliver=function(n,i){n.isSame(e)&&(t.off("flush",onDeliver),r(n))};t.on("flush",onDeliver)})]})})},CoreEventQueue.prototype.dispatchSingle=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t=this;return(0,o.Jh)(this,function(r){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.updateAttempts(e),e.attempts=1,[2,this.deliver(e).catch(function(r){return t.enqueuRetry(r,e)?t.subscribeToDelivery(e):(e.setFailedDelivery({reason:r}),e)})]})})},CoreEventQueue.prototype.isEmpty=function(){return 0===this.queue.length},CoreEventQueue.prototype.scheduleFlush=function(e){var t=this;void 0===e&&(e=500),this.flushing||(this.flushing=!0,setTimeout(function(){t.flush().then(function(){setTimeout(function(){t.flushing=!1,t.queue.length&&t.scheduleFlush(0)},0)})},e))},CoreEventQueue.prototype.deliver=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,this.criticalTasks.done()];case 1:o.sent(),t=Date.now(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.flushOne(e)];case 3:return e=o.sent(),r=Date.now()-t,this.emit("delivery_success",e),e.stats.gauge("delivered",r),e.log("debug","Delivered",e.event),[2,e];case 4:throw i=n=o.sent(),e.log("error","Failed to deliver",i),this.emit("delivery_failure",e,i),e.stats.increment("delivery_failed"),n;case 5:return[2]}})})},CoreEventQueue.prototype.enqueuRetry=function(e,t){return(!(e instanceof k.Y)||!!e.retry)&&this.queue.pushWithBackoff(t)},CoreEventQueue.prototype.flush=function(){return(0,o.mG)(this,void 0,void 0,function(){var e,t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(0===this.queue.length||!(e=this.queue.pop()))return[2,[]];e.attempts=this.queue.getAttempts(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.deliver(e)];case 2:return e=r.sent(),this.emit("flush",e,!0),[3,4];case 3:return t=r.sent(),this.enqueuRetry(t,e)||(e.setFailedDelivery({reason:t}),this.emit("flush",e,!1)),[2,[]];case 4:return[2,[e]]}})})},CoreEventQueue.prototype.isReady=function(){return!0},CoreEventQueue.prototype.availableExtensions=function(e){var t,r,n=(t="type",r={},this.plugins.filter(function(t){if("destination"!==t.type&&"Segment.io"!==t.name)return!0;var r,n,i,o=void 0;return null===(r=t.alternativeNames)||void 0===r||r.forEach(function(t){void 0!==e[t]&&(o=e[t])}),null!==(i=null!==(n=e[t.name])&&void 0!==n?n:o)&&void 0!==i?i:!1!==("Segment.io"===t.name||e.All)}).forEach(function(e){var n,i=void 0;if("string"==typeof t){var s=e[t];i="string"!=typeof s?JSON.stringify(s):s}else t instanceof Function&&(i=t(e));void 0!==i&&(r[i]=(0,o.ev)((0,o.ev)([],null!==(n=r[i])&&void 0!==n?n:[],!0),[e],!1))}),r),i=n.before,s=n.enrichment,a=n.destination,u=n.after;return{before:void 0===i?[]:i,enrichment:void 0===s?[]:s,destinations:void 0===a?[]:a,after:void 0===u?[]:u}},CoreEventQueue.prototype.flushOne=function(e){var t,r;return(0,o.mG)(this,void 0,void 0,function(){var n,i,s,a,u,c,l,h,p,d,f,y,g;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!this.isReady())throw Error("Not ready");e.attempts>1&&this.emit("delivery_retry",e),i=(n=this.availableExtensions(null!==(t=e.event.integrations)&&void 0!==t?t:{})).before,s=n.enrichment,a=0,u=i,o.label=1;case 1:if(!(a<u.length))return[3,4];return c=u[a],[4,(0,C.z)(e,c)];case 2:(l=o.sent())instanceof k._&&(e=l),this.emit("message_enriched",e,c),o.label=3;case 3:return a++,[3,1];case 4:h=0,p=s,o.label=5;case 5:if(!(h<p.length))return[3,8];return d=p[h],[4,(0,C.a)(e,d)];case 6:(l=o.sent())instanceof k._&&(e=l),this.emit("message_enriched",e,d),o.label=7;case 7:return h++,[3,5];case 8:return y=(f=this.availableExtensions(null!==(r=e.event.integrations)&&void 0!==r?r:{})).destinations,g=f.after,[4,new Promise(function(t,r){setTimeout(function(){Promise.all(y.map(function(t){return(0,C.a)(e,t)})).then(t).catch(r)},0)})];case 9:return o.sent(),e.stats.increment("message_delivered"),this.emit("message_delivered",e),[4,Promise.all(g.map(function(t){return(0,C.a)(e,t)}))];case 10:return o.sent(),[2,e]}})})},CoreEventQueue}(d.Q));function bindAll(e){for(var t=e.constructor.prototype,r=0,n=Object.getOwnPropertyNames(t);r<n.length;r++){var i=n[r];if("constructor"!==i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);o&&"function"==typeof o.value&&(e[i]=e[i].bind(e))}}return e}var A={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"},_logStoreKeyError=function(e,t,r,n){console.warn("".concat(e.constructor.name,": Can't ").concat(t,' key "').concat(r,'" | Err: ').concat(n))},P=function(){function UniversalStorage(e){this.stores=e}return UniversalStorage.prototype.get=function(e){for(var t=null,r=0,n=this.stores;r<n.length;r++){var i=n[r];try{if(null!=(t=i.get(e)))return t}catch(t){_logStoreKeyError(i,"get",e,t)}}return null},UniversalStorage.prototype.set=function(e,t){this.stores.forEach(function(r){try{r.set(e,t)}catch(t){_logStoreKeyError(r,"set",e,t)}})},UniversalStorage.prototype.clear=function(e){this.stores.forEach(function(t){try{t.remove(e)}catch(r){_logStoreKeyError(t,"remove",e,r)}})},UniversalStorage.prototype.getAndSync=function(e){var t=this.get(e),r="number"==typeof t?t.toString():t;return this.set(e,r),r},UniversalStorage}(),x=function(){function MemoryStorage(){this.cache={}}return MemoryStorage.prototype.get=function(e){var t;return null!==(t=this.cache[e])&&void 0!==t?t:null},MemoryStorage.prototype.set=function(e,t){this.cache[e]=t},MemoryStorage.prototype.remove=function(e){delete this.cache[e]},MemoryStorage}();function isArrayOfStoreType(e){return e&&e.stores&&Array.isArray(e.stores)&&e.stores.every(function(e){return Object.values(A).includes(e)})}/*! js-cookie v3.0.1 | MIT */function js_cookie_assign(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var E=function init(e,t){function set(r,n,i){if("undefined"!=typeof document){"number"==typeof(i=js_cookie_assign({},t,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=r+"="+e.write(n,r)+o}}return Object.create({set:set,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var o=r[i].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(n[a]=e.read(s,a),t===a)break}catch(e){}}return t?n[t]:n}},remove:function(e,t){set(e,"",js_cookie_assign({},t,{expires:-1}))},withAttributes:function(e){return init(this.converter,js_cookie_assign({},this.attributes,e))},withConverter:function(e){return init(js_cookie_assign({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function tld(e){var t=function(e){try{return new URL(e)}catch(e){return}}(e);if(t)for(var r=function(e){var t=e.hostname.split("."),r=t[t.length-1],n=[];if(4===t.length&&parseInt(r,10)>0||t.length<=1)return n;for(var i=t.length-2;i>=0;--i)n.push(t.slice(i).join("."));return n}(t),n=0;n<r.length;++n){var i="__tld__",o=r[n],s={domain:"."+o};try{if(E.set(i,"1",s),E.get(i))return E.remove(i,s),o}catch(e){return}}}var O=function(){function CookieStorage(e){void 0===e&&(e=CookieStorage.defaults),this.options=(0,o.pi)((0,o.pi)({},CookieStorage.defaults),e)}return Object.defineProperty(CookieStorage,"defaults",{get:function(){return{maxage:365,domain:tld(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),CookieStorage.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},CookieStorage.prototype.get=function(e){var t;try{var r=E.get(e);if(null==r)return null;try{return null!==(t=JSON.parse(r))&&void 0!==t?t:null}catch(e){return null!=r?r:null}}catch(e){return null}},CookieStorage.prototype.set=function(e,t){"string"==typeof t?E.set(e,t,this.opts()):null===t?E.remove(e,this.opts()):E.set(e,JSON.stringify(t),this.opts())},CookieStorage.prototype.remove=function(e){return E.remove(e,this.opts())},CookieStorage}(),T=function(){function LocalStorage(){}return LocalStorage.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},LocalStorage.prototype.get=function(e){var t;try{var r=localStorage.getItem(e);if(null===r)return null;try{return null!==(t=JSON.parse(r))&&void 0!==t?t:null}catch(e){return null!=r?r:null}}catch(t){return this.localStorageWarning(e,"unavailable"),null}},LocalStorage.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){this.localStorageWarning(e,"full")}},LocalStorage.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch(t){this.localStorageWarning(e,"unavailable")}},LocalStorage}();function initializeStorages(e){return e.map(function(e){var t,r;switch("object"==typeof e&&void 0!==e.name?(t=e.name,r=e.settings):t=e,t){case A.Cookie:return new O(r);case A.LocalStorage:return new T;case A.Memory:return new x;default:throw Error("Unknown Store Type: ".concat(e))}})}function applyCookieOptions(e,t){return e.map(function(e){return t&&e===A.Cookie?{name:e,settings:t}:e})}var j={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},D=function(){function User(e,t){void 0===e&&(e=j);var r,n,i,s,a=this;this.options={},this.id=function(e){if(a.options.disable)return null;var t=a.identityStore.getAndSync(a.idKey);void 0!==e&&(a.identityStore.set(a.idKey,e),e!==t&&null!==t&&null!==e&&a.anonymousId(null));var r=a.identityStore.getAndSync(a.idKey);if(r)return r;var n=a.legacyUserStore.get(j.cookie.oldKey);return n?"object"==typeof n?n.id:n:null},this.anonymousId=function(e){var t,r;if(a.options.disable)return null;if(void 0===e){var n=null!==(t=a.identityStore.getAndSync(a.anonKey))&&void 0!==t?t:null===(r=a.legacySIO())||void 0===r?void 0:r[0];if(n)return n}return null===e?a.identityStore.set(a.anonKey,null):a.identityStore.set(a.anonKey,null!=e?e:(0,f.v4)()),a.identityStore.getAndSync(a.anonKey)},this.traits=function(e){var t;if(!a.options.disable)return null===e&&(e={}),e&&a.traitsStore.set(a.traitsKey,null!=e?e:{}),null!==(t=a.traitsStore.get(a.traitsKey))&&void 0!==t?t:{}},this.options=(0,o.pi)((0,o.pi)({},j),e),this.cookieOptions=t,this.idKey=null!==(n=null===(r=e.cookie)||void 0===r?void 0:r.key)&&void 0!==n?n:j.cookie.key,this.traitsKey=null!==(s=null===(i=e.localStorage)||void 0===i?void 0:i.key)&&void 0!==s?s:j.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,t),this.legacyUserStore=this.createStorage(this.options,t,function(e){return e===A.Cookie}),this.traitsStore=this.createStorage(this.options,t,function(e){return e!==A.Cookie});var u=this.legacyUserStore.get(j.cookie.oldKey);u&&"object"==typeof u&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),bindAll(this)}return User.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----");return[t[0],t[1]]},User.prototype.identify=function(e,t){if(!this.options.disable){t=null!=t?t:{};var r=this.id();(null===r||r===e)&&(t=(0,o.pi)((0,o.pi)({},this.traits()),t)),e&&this.id(e),this.traits(t)}},User.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},User.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},User.prototype.load=function(){return new User(this.options,this.cookieOptions)},User.prototype.save=function(){return!0},User.prototype.createStorage=function(e,t,r){var n=[A.LocalStorage,A.Cookie,A.Memory];return e.disable?new P([]):e.persist?(void 0!==e.storage&&null!==e.storage&&isArrayOfStoreType(e.storage)&&(n=e.storage.stores),e.localStorageFallbackDisabled&&(n=n.filter(function(e){return e!==A.LocalStorage})),r&&(n=n.filter(r)),new P(initializeStorages(applyCookieOptions(n,t)))):new P([new x])},User.defaults=j,User}(),M={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},F=function(e){function Group(t,r){void 0===t&&(t=M);var n=e.call(this,(0,o.pi)((0,o.pi)({},M),t),r)||this;return n.anonymousId=function(e){},bindAll(n),n}return(0,o.ZT)(Group,e),Group}(D),I=r(39821),B=r(44083),R=r(74939),flushSyncAnalyticsCalls=function(e,t,r){r.getCalls(e).forEach(function(e){callAnalyticsMethod(t,e).catch(console.error)})},N=flushSyncAnalyticsCalls.bind(void 0,"on"),L=flushSyncAnalyticsCalls.bind(void 0,"setAnonymousId"),flushAnalyticsCallsInNewTask=function(e,t){t.toArray().forEach(function(t){setTimeout(function(){callAnalyticsMethod(e,t).catch(console.error)},0)})},popPageContext=function(e){if(hasBufferedPageContextAsLastArg(e))return createPageContext(e.pop())},hasBufferedPageContextAsLastArg=function(e){return function(e){if(!(0,c.PO)(e)||"bpc"!==e.__t)return!1;for(var t in e)if(!m.includes(t))return!1;return!0}(e[e.length-1])},PreInitMethodCall=function(e,t,r,n){void 0===r&&(r=function(){}),void 0===n&&(n=console.error),this.method=e,this.resolve=r,this.reject=n,this.called=!1,this.args=t},q=function(){function PreInitMethodCallBuffer(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.push.apply(this,e)}return Object.defineProperty(PreInitMethodCallBuffer.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),PreInitMethodCallBuffer.prototype.getCalls=function(e){var t;return null!==(t=this.calls[e])&&void 0!==t?t:[]},PreInitMethodCallBuffer.prototype.push=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.forEach(function(t){["track","screen","alias","group","page","identify"].includes(t.method)&&!hasBufferedPageContextAsLastArg(t.args)&&(t.args=(0,o.ev)((0,o.ev)([],t.args,!0),[getDefaultBufferedPageContext()],!1)),e.calls[t.method]?e.calls[t.method].push(t):e.calls[t.method]=[t]})},PreInitMethodCallBuffer.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},PreInitMethodCallBuffer.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},PreInitMethodCallBuffer.prototype._pushSnippetWindowBuffer=function(){var e=(0,R.wI)();if(Array.isArray(e)){var t=e.splice(0,e.length).map(function(e){var t=e[0],r=e.slice(1);return new PreInitMethodCall(t,r)});this.push.apply(this,t)}},PreInitMethodCallBuffer}();function callAnalyticsMethod(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r,n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:var o;if(i.trys.push([0,3,,4]),t.called)return[2,void 0];if(t.called=!0,!("object"==typeof(o=r=e[t.method].apply(e,t.args))&&null!==o&&"then"in o&&"function"==typeof o.then))return[3,2];return[4,r];case 1:i.sent(),i.label=2;case 2:return t.resolve(r),[3,4];case 3:return n=i.sent(),t.reject(n),[3,4];case 4:return[2]}})})}var U=function(){function AnalyticsBuffered(e){var t=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=I.i,this._preInitBuffer=new q,this._promise=e(this._preInitBuffer),this._promise.then(function(e){var r=e[0],n=e[1];t.instance=r,t.ctx=n}).catch(function(){})}return AnalyticsBuffered.prototype.then=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this._promise).then.apply(e,t)},AnalyticsBuffered.prototype.catch=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this._promise).catch.apply(e,t)},AnalyticsBuffered.prototype.finally=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this._promise).finally.apply(e,t)},AnalyticsBuffered.prototype._createMethod=function(e){var t=this;return function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.instance?Promise.resolve((r=t.instance)[e].apply(r,n)):new Promise(function(r,i){t._preInitBuffer.push(new PreInitMethodCall(e,n,r,i))})}},AnalyticsBuffered.prototype._createChainableMethod=function(e){var t=this;return function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.instance?(r=t.instance)[e].apply(r,n):t._preInitBuffer.push(new PreInitMethodCall(e,n)),t}},AnalyticsBuffered}(),J="This is being deprecated and will be not be available in future releases of Analytics JS",G=(0,B.R)(),z=null==G?void 0:G.analytics;function _stub(){console.warn(J)}var K=function(e){function Analytics(t,r,n,i,s){var a,u,c,l,h,p,d,f,y=this;(y=e.call(this)||this)._debug=!1,y.initialized=!1,y.user=function(){return y._user},y.init=y.initialize.bind(y),y.log=_stub,y.addIntegrationMiddleware=_stub,y.listeners=_stub,y.addEventListener=_stub,y.removeAllListeners=_stub,y.removeListener=_stub,y.removeEventListener=_stub,y.hasListeners=_stub,y.add=_stub,y.addIntegration=_stub;var g=null==r?void 0:r.cookie,v=null!==(p=null==r?void 0:r.disableClientPersistence)&&void 0!==p&&p;y.settings=t,y.settings.timeout=null!==(d=y.settings.timeout)&&void 0!==d?d:300,y.queue=null!=n?n:(a="".concat(t.writeKey,":event-queue"),void 0===(u=null==r?void 0:r.retryQueue)&&(u=!1),void 0===(c=v)&&(c=!1),l=u?4:1,h=c?new w.Z(l,[]):new _.$(l,a),new S(h));var m=null==r?void 0:r.storage;return y._universalStorage=y.createStore(v,m,g),y._user=null!=i?i:new D((0,o.pi)({persist:!v,storage:null==r?void 0:r.storage},null==r?void 0:r.user),g).load(),y._group=null!=s?s:new F((0,o.pi)({persist:!v,storage:null==r?void 0:r.storage},null==r?void 0:r.group),g).load(),y.eventFactory=new b(y._user),y.integrations=null!==(f=null==r?void 0:r.integrations)&&void 0!==f?f:{},y.options=null!=r?r:{},bindAll(y),y}return(0,o.ZT)(Analytics,e),Analytics.prototype.createStore=function(e,t,r){return new P(e?[new x]:t&&isArrayOfStoreType(t)?initializeStorages(applyCookieOptions(t.stores,r)):initializeStorages([A.LocalStorage,{name:A.Cookie,settings:r},A.Memory]))},Object.defineProperty(Analytics.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),Analytics.prototype.track=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i,s,a,u,c=this;return(0,o.Jh)(this,function(o){return t=popPageContext(e),n=(r=resolveArguments.apply(void 0,e))[0],i=r[1],s=r[2],a=r[3],u=this.eventFactory.track(n,i,s,this.integrations,t),[2,this._dispatch(u,a).then(function(e){return c.emit("track",n,e.event.properties,e.event.options),e})]})})},Analytics.prototype.page=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i,s,a,u,c,l=this;return(0,o.Jh)(this,function(o){return t=popPageContext(e),n=(r=resolvePageArguments.apply(void 0,e))[0],i=r[1],s=r[2],a=r[3],u=r[4],c=this.eventFactory.page(n,i,s,a,this.integrations,t),[2,this._dispatch(c,u).then(function(e){return l.emit("page",n,i,e.event.properties,e.event.options),e})]})})},Analytics.prototype.identify=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i,s,a,u,c=this;return(0,o.Jh)(this,function(o){return t=popPageContext(e),n=(r=resolveUserArguments(this._user).apply(void 0,e))[0],i=r[1],s=r[2],a=r[3],this._user.identify(n,i),u=this.eventFactory.identify(this._user.id(),this._user.traits(),s,this.integrations,t),[2,this._dispatch(u,a).then(function(e){return c.emit("identify",e.event.userId,e.event.traits,e.event.options),e})]})})},Analytics.prototype.group=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=popPageContext(t);if(0===t.length)return this._group;var i=resolveUserArguments(this._group).apply(void 0,t),o=i[0],s=i[1],a=i[2],u=i[3];this._group.identify(o,s);var c=this._group.id(),l=this._group.traits(),h=this.eventFactory.group(c,l,a,this.integrations,n);return this._dispatch(h,u).then(function(t){return e.emit("group",t.event.groupId,t.event.traits,t.event.options),t})},Analytics.prototype.alias=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i,s,a,u,c=this;return(0,o.Jh)(this,function(o){return t=popPageContext(e),n=(r=resolveAliasArguments.apply(void 0,e))[0],i=r[1],s=r[2],a=r[3],u=this.eventFactory.alias(n,i,s,this.integrations,t),[2,this._dispatch(u,a).then(function(e){return c.emit("alias",n,i,e.event.options),e})]})})},Analytics.prototype.screen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i,s,a,u,c,l=this;return(0,o.Jh)(this,function(o){return t=popPageContext(e),n=(r=resolvePageArguments.apply(void 0,e))[0],i=r[1],s=r[2],a=r[3],u=r[4],c=this.eventFactory.screen(n,i,s,a,this.integrations,t),[2,this._dispatch(c,u).then(function(e){return l.emit("screen",n,i,e.event.properties,e.event.options),e})]})})},Analytics.prototype.trackClick=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,r.e(8119).then(r.bind(r,4802))];case 1:return[2,(t=n.sent().link).call.apply(t,(0,o.ev)([this],e,!1))]}})})},Analytics.prototype.trackLink=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,r.e(8119).then(r.bind(r,4802))];case 1:return[2,(t=n.sent().link).call.apply(t,(0,o.ev)([this],e,!1))]}})})},Analytics.prototype.trackSubmit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,r.e(8119).then(r.bind(r,4802))];case 1:return[2,(t=n.sent().form).call.apply(t,(0,o.ev)([this],e,!1))]}})})},Analytics.prototype.trackForm=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,r.e(8119).then(r.bind(r,4802))];case 1:return[2,(t=n.sent().form).call.apply(t,(0,o.ev)([this],e,!1))]}})})},Analytics.prototype.register=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t,r=this;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return t=h._.system(),[4,Promise.all(e.map(function(e){return r.queue.register(t,e,r)}))];case 1:return n.sent(),[2,t]}})})},Analytics.prototype.deregister=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.mG)(this,void 0,void 0,function(){var t,r=this;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return t=h._.system(),[4,Promise.all(e.map(function(e){var n=r.queue.plugins.find(function(t){return t.name===e});if(n)return r.queue.deregister(t,n,r);t.log("warn","plugin ".concat(e," not found"))}))];case 1:return n.sent(),[2,t]}})})},Analytics.prototype.debug=function(e){return!1===e&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=e,this},Analytics.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},Analytics.prototype.timeout=function(e){this.settings.timeout=e},Analytics.prototype._dispatch=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r;return(0,o.Jh)(this,function(n){return(r=new h._(e),(0,l.s)()&&!this.options.retryQueue)?[2,r]:[2,function(e,t,r,n){return(0,o.mG)(this,void 0,void 0,function(){var i,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(r.emit("dispatch_start",e),i=Date.now(),!t.isEmpty())return[3,2];return[4,t.dispatchSingle(e)];case 1:return s=o.sent(),[3,4];case 2:return[4,t.dispatch(e)];case 3:s=o.sent(),o.label=4;case 4:var a,u;if(!(null==n?void 0:n.callback))return[3,6];return[4,(0,p.UI)(s,n.callback,(a=i,Math.max((null!=(u=n.timeout)?u:300)-(Date.now()-a),0)))];case 5:s=o.sent(),o.label=6;case 6:return(null==n?void 0:n.debug)&&s.flush(),[2,s]}})})}(r,this.queue,this,{callback:t,debug:this._debug,timeout:this.settings.timeout})]})})},Analytics.prototype.addSourceMiddleware=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t=this;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,this.queue.criticalTasks.run(function(){return(0,o.mG)(t,void 0,void 0,function(){var t,n,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,Promise.resolve().then(r.bind(r,66170))];case 1:return t=o.sent().sourceMiddlewarePlugin,n={},this.queue.plugins.forEach(function(e){if("destination"===e.type)return n[e.name]=!0}),i=t(e,n),[4,this.register(i)];case 2:return o.sent(),[2]}})})})];case 1:return n.sent(),[2,this]}})})},Analytics.prototype.addDestinationMiddleware=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return this.queue.plugins.filter(function(t){return t.name.toLowerCase()===e.toLowerCase()}).forEach(function(e){e.addMiddleware.apply(e,t)}),Promise.resolve(this)},Analytics.prototype.setAnonymousId=function(e){return this._user.anonymousId(e)},Analytics.prototype.queryString=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(!1===this.options.useQueryString)return[2,[]];return[4,r.e(3096).then(r.bind(r,46167))];case 1:return[2,(0,t.sent().queryString)(this,e)]}})})},Analytics.prototype.use=function(e){return e(this),this},Analytics.prototype.ready=function(e){return void 0===e&&(e=function(e){return e}),(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){return[2,Promise.all(this.queue.plugins.map(function(e){return e.ready?e.ready():Promise.resolve()})).then(function(t){return e(t),t})]})})},Analytics.prototype.noConflict=function(){return console.warn(J),(0,R.ql)(null!=z?z:this),this},Analytics.prototype.normalize=function(e){return console.warn(J),this.eventFactory.normalize(e)},Object.defineProperty(Analytics.prototype,"failedInitializations",{get:function(){return console.warn(J),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(Analytics.prototype,"VERSION",{get:function(){return I.i},enumerable:!1,configurable:!0}),Analytics.prototype.initialize=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return console.warn(J),[2,Promise.resolve(this)]})})},Analytics.prototype.pageview=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return console.warn(J),[4,this.page({path:e})];case 1:return t.sent(),[2,this]}})})},Object.defineProperty(Analytics.prototype,"plugins",{get:function(){var e;return console.warn(J),null!==(e=this._plugins)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),Object.defineProperty(Analytics.prototype,"Integrations",{get:function(){return console.warn(J),this.queue.plugins.filter(function(e){return"destination"===e.type}).reduce(function(e,t){var r="".concat(t.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),n=window[r];if(!n)return e;var i=n.Integration;return i?e[t.name]=i:e[t.name]=n,e},{})},enumerable:!1,configurable:!0}),Analytics.prototype.push=function(e){var t=e.shift();(!t||this[t])&&this[t].apply(this,e)},Analytics}(d.Q),V=r(913),createDeferred=function(){var e,t,r=new Promise(function(r,n){e=r,t=n});return{resolve:e,reject:t,promise:r}},Q=r(7227),W=r(67475),objectToQueryString=function(e){try{var t=new URLSearchParams;return Object.entries(e).forEach(function(e){var r=e[0],n=e[1];Array.isArray(n)?n.forEach(function(e){return t.append(r,e)}):t.append(r,n)}),t.toString()}catch(e){return""}},H=new function(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(t,r){return(0,o.mG)(e,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:this.instance=r,t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){return(t=navigator.userAgentData)?e?[2,t.getHighEntropyValues(e).catch(function(){return t.toJSON()})]:[2,t.toJSON()]:[2,void 0]})})}(this.instance.options.highEntropyValuesClientHints)];case 2:return e.userAgentData=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(t){var r,i,s,a,u,c,l,h,p=t.event.context,d=p.page.search||"",f="object"==typeof d?objectToQueryString(d):d;p.userAgent=navigator.userAgent,p.userAgentData=e.userAgentData;var y=navigator.userLanguage||navigator.language;void 0===p.locale&&void 0!==y&&(p.locale=y),null!==(l=p.library)&&void 0!==l||(p.library={name:"analytics.js",version:"".concat("web"===(0,Q.B)()?"next":"npm:next","-").concat(I.i)}),f&&!p.campaign&&(p.campaign=((c=f).startsWith("?")&&(c=c.substring(1)),(c=c.replace(/\?/g,"&")).split("&").reduce(function(e,t){var r=t.split("="),n=r[0],i=r[1];if(n.includes("utm_")&&n.length>4){var o=n.slice(4);"campaign"===o&&(o="name"),e[o]=(0,W.a)(void 0===i?"":i)}return e},{})));var g=function(){var e=E.get("_ga");if(e&&e.startsWith("amp"))return e}();g&&(p.amp={id:g}),r=null!==(h=e.instance.options.disableClientPersistence)&&void 0!==h&&h,a=(s=new P(r?[]:[new O(function(){if(n)return n;var e=tld(window.location.href);return n={expires:31536e6,secure:!1,path:"/"},e&&(n.domain=e),n}())])).get("s:context.referrer"),(u=null!==(i=function(e){var t={btid:"dataxu",urid:"millennial-media"};e.startsWith("?")&&(e=e.substring(1));for(var r=(e=e.replace(/\?/g,"&")).split("&"),n=0;n<r.length;n++){var i=r[n].split("="),o=i[0],s=i[1];if(t[o])return{id:s,type:t[o]}}}(f))&&void 0!==i?i:a)&&(p&&(p.referrer=(0,o.pi)((0,o.pi)({},p.referrer),u)),s.set("s:context.referrer",u));try{p.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}return t},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},Y=r(66548),$=r(66170),Z=function(){function ActionDestination(e,t){this.version="1.0.0",this.alternativeNames=[],this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return ActionDestination.prototype.addMiddleware=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];"destination"===this.type&&(e=this.middleware).push.apply(e,t)},ActionDestination.prototype.transform=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,$.applyDestinationMiddleware)(this.name,e.event,this.middleware)];case 1:return null===(t=r.sent())&&e.cancel(new k.Y({retry:!1,reason:"dropped by destination middleware"})),[2,new h._(t)]}})})},ActionDestination.prototype._createMethod=function(e){var t=this;return function(r){return(0,o.mG)(t,void 0,void 0,function(){var t,n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!this.action[e])return[2,r];if(t=r,"destination"!==this.type)return[3,2];return[4,this.transform(r)];case 1:t=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),r.stats.increment("analytics_js.action_plugin.invoke",1,["method:".concat(e),"action_plugin_name:".concat(this.action.name)]),[4,this.action[e](t)];case 3:return i.sent(),[3,5];case 4:throw n=i.sent(),r.stats.increment("analytics_js.action_plugin.invoke.error",1,["method:".concat(e),"action_plugin_name:".concat(this.action.name)]),n;case 5:return[2,r]}})})}},ActionDestination.prototype.isLoaded=function(){return this.action.isLoaded()},ActionDestination.prototype.ready=function(){return this.action.ready?this.action.ready():Promise.resolve()},ActionDestination.prototype.load=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e.stats.increment("analytics_js.action_plugin.invoke",1,["method:load","action_plugin_name:".concat(this.action.name)]),[4,this.action.load(e,t)];case 1:return[2,n.sent()];case 2:throw r=n.sent(),e.stats.increment("analytics_js.action_plugin.invoke.error",1,["method:load","action_plugin_name:".concat(this.action.name)]),r;case 3:return[2]}})})},ActionDestination.prototype.unload=function(e,t){var r,n;return null===(n=(r=this.action).unload)||void 0===n?void 0:n.call(r,e,t)},ActionDestination}(),X=r(23888),onPageChange=function(e){var t=!1;window.addEventListener("pagehide",function(){t||e(t=!0)}),document.addEventListener("visibilitychange",function(){if("hidden"==document.visibilityState){if(t)return;t=!0}else t=!1;e(t)})};function kilobytes(e){return(encodeURI(JSON.stringify(e)).split(/%..|./).length-1)/1024}var ee=r(56749);function scheduleFlush(e,t,r,n){var i=this;e||setTimeout(function(){return(0,o.mG)(i,void 0,void 0,function(){var e,i;return(0,o.Jh)(this,function(s){switch(s.label){case 0:return e=!0,[4,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r,n=this;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(r=[],(0,l.s)())return[2,t];return[4,(0,ee.x)(function(){return t.length>0&&!(0,l.s)()},function(){return(0,o.mG)(n,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!(n=t.pop()))return[2];return[4,(0,C.a)(n,e)];case 1:return i.sent() instanceof h._||r.push(n),[2]}})})})];case 1:return i.sent(),r.map(function(e){return t.pushWithBackoff(e)}),[2,t]}})})}(r,t)];case 1:return i=s.sent(),e=!1,t.todo>0&&n(e,i,r,n),[2]}})})},5e3*Math.random())}var et=r(36514),er=function(e){function ValidationError(t,r){var n=e.call(this,"".concat(t," ").concat(r))||this;return n.field=t,n}return(0,o.ZT)(ValidationError,e),ValidationError}(Error),en="is not a string",ei="is nil";function validation_validate(e){var t,r=e.event;!function(e){if(!(0,c.Gg)(e))throw new er("Event",ei);if("object"!=typeof e)throw new er("Event","is not an object")}(r),function(e){if(!(0,c.HD)(e.type))throw new er(".type",en)}(r),"track"===r.type&&function(e){if(!(0,c.HD)(e.event))throw new er(".event",en)}(r);var n=null!==(t=r.properties)&&void 0!==t?t:r.traits;if("alias"!==r.type&&!(0,c.PO)(n))throw new er(".properties","is not an object");return!function(e){var t,r,n,i=".userId/anonymousId/previousId/groupId",o=null!==(n=null!==(r=null!==(t=e.userId)&&void 0!==t?t:e.anonymousId)&&void 0!==r?r:e.groupId)&&void 0!==n?n:e.previousId;if((0,c.Gg)(o)){if(!(0,c.HD)(o))throw new er(i,en)}else throw new er(i,ei)}(r),e}var eo={name:"Event Validation",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:validation_validate,identify:validation_validate,page:validation_validate,alias:validation_validate,group:validation_validate,screen:validation_validate},es=(0,B.R)(),ea=null!==(i=es.__SEGMENT_INSPECTOR__)&&void 0!==i?i:es.__SEGMENT_INSPECTOR__={},attachInspector=function(e){var t;return null===(t=ea.attach)||void 0===t?void 0:t.call(ea,e)},eu=r(42718),ec=function(e){function AnalyticsBrowser(){var t=this,n=createDeferred(),i=n.promise,s=n.resolve;return(t=e.call(this,function(e){return i.then(function(t){return function(e,t,n){var i,s,c,h,p,d,f;return void 0===t&&(t={}),(0,o.mG)(this,void 0,void 0,function(){var y,g,v,m,b,k,C,S,A,P,x;return(0,o.Jh)(this,function(E){var O,T,j,D;switch(E.label){case 0:if(t.globalAnalyticsKey&&(0,R.jV)(t.globalAnalyticsKey),e.cdnURL&&(0,a.UH)(e.cdnURL),!(null!==(i=e.cdnSettings)&&void 0!==i))return[3,1];return g=i,[3,3];case 1:return[4,(O=e.writeKey,j=null!=(T=e.cdnURL)?T:(0,a.Vl)(),(0,u.h)("".concat(j,"/v1/projects/").concat(O,"/settings")).then(function(e){return e.ok?e.json():e.text().then(function(e){throw Error(e)})}).catch(function(e){throw console.error(e.message),e}))];case 2:g=E.sent(),E.label=3;case 3:return y=g,t.updateCDNSettings&&(y=t.updateCDNSettings(y)),v=null===(c=null===(s=y.integrations["Segment.io"])||void 0===s?void 0:s.retryQueue)||void 0===c||c,m=(0,o.pi)({retryQueue:v},t),attachInspector(b=new K(e,m)),k=null!==(h=e.plugins)&&void 0!==h?h:[],C=null!==(p=e.classicIntegrations)&&void 0!==p?p:[],eu.j.initRemoteMetrics(y.metrics),L(D=b,n),N(D,n),[4,function(e,t,n,i,s,c,h){var p,d,f;return void 0===c&&(c=[]),(0,o.mG)(this,void 0,void 0,function(){var y,g,v,m,b,k,C,S,A,P,x,E,O,T,j=this;return(0,o.Jh)(this,function(D){var M,F,I;switch(D.label){case 0:if(y=null==c?void 0:c.filter(function(e){return"object"==typeof e}),g=null==c?void 0:c.filter(function(e){return"function"==typeof e&&"string"==typeof e.pluginName}),"test"===getProcessEnv().NODE_ENV||!((null!==(I=null===(F=null===(M=t.middlewareSettings)||void 0===M?void 0:M.routingRules)||void 0===F?void 0:F.length)&&void 0!==I?I:0)>0))return[3,2];return[4,r.e(4604).then(r.bind(r,37122)).then(function(e){return e.tsubMiddleware(t.middlewareSettings.routingRules)})];case 1:return m=D.sent(),[3,3];case 2:m=void 0,D.label=3;case 3:if(v=m,("test"===getProcessEnv().NODE_ENV||!(Object.keys(t.integrations).length>1))&&!(h.length>0))return[3,5];return[4,r.e(9464).then(r.bind(r,92631)).then(function(r){return r.ajsDestinations(e,t,n.integrations,i,v,h)})];case 4:return k=D.sent(),[3,6];case 5:k=[],D.label=6;case 6:if(b=k,!t.legacyVideoPluginsEnabled)return[3,8];return[4,r.e(8150).then(r.bind(r,66352)).then(function(e){return e.loadLegacyVideoPlugins(n)})];case 7:D.sent(),D.label=8;case 8:if(!(null===(p=i.plan)||void 0===p?void 0:p.track))return[3,10];return[4,r.e(7493).then(r.bind(r,70527)).then(function(e){var r;return e.schemaFilter(null===(r=i.plan)||void 0===r?void 0:r.track,t)})];case 9:return S=D.sent(),[3,11];case 10:S=void 0,D.label=11;case 11:return C=S,A=(0,V.o)(t,s),[4,(function(e,t,r,n,i,s){var u,c,l;return(0,o.mG)(this,void 0,void 0,function(){var h,p,d=this;return(0,o.Jh)(this,function(f){switch(f.label){case 0:return h=[],p=null!==(c=null===(u=e.middlewareSettings)||void 0===u?void 0:u.routingRules)&&void 0!==c?c:[],[4,Promise.all((null!==(l=e.remotePlugins)&&void 0!==l?l:[]).map(function(e){return(0,o.mG)(d,void 0,void 0,function(){var u,c,l,d,f;return(0,o.Jh)(this,function(y){switch(y.label){case 0:var g,v;if(g=t[e.creationName],v=t[e.name],!1===t.All&&!g&&!v||!1===g||!1===v)return[2];y.label=1;case 1:if(y.trys.push([1,6,,7]),c=null==s?void 0:s.find(function(t){return t.pluginName===e.name}))return[3,3];return[4,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r,n,i,s,u;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(r=RegExp("https://cdn.segment.(com|build)"),n=(0,a.Vl)(),!t)return[3,6];s=(i=e.url.split("/"))[i.length-2],u=e.url.replace(s,btoa(s).replace(/=/g,"")),o.label=1;case 1:return o.trys.push([1,3,,5]),[4,(0,Y.v)(u.replace(r,n))];case 2:case 4:return o.sent(),[3,5];case 3:return o.sent(),[4,(0,Y.v)(e.url.replace(r,n))];case 5:return[3,8];case 6:return[4,(0,Y.v)(e.url.replace(r,n))];case 7:o.sent(),o.label=8;case 8:if("function"==typeof window[e.libraryName])return[2,window[e.libraryName]];return[2]}})})}(e,n)];case 2:c=y.sent(),y.label=3;case 3:if(!(u=c))return[3,5];return[4,u((0,o.pi)((0,o.pi)({},e.settings),r[e.name]))];case 4:(function(e){if(!Array.isArray(e))throw Error("Not a valid list of plugins");var t=["load","isLoaded","name","version","type"];e.forEach(function(e){t.forEach(function(t){var r;if(void 0===e[t])throw Error("Plugin: ".concat(null!==(r=e.name)&&void 0!==r?r:"unknown"," missing required function ").concat(t))})})})(d=Array.isArray(l=y.sent())?l:[l]),f=p.filter(function(t){return t.destinationName===e.creationName}),d.forEach(function(t){var r=new Z(e.creationName,t);f.length&&i&&"destination"===t.type&&r.addMiddleware(i),h.push(r)}),y.label=5;case 5:return[3,7];case 6:return console.warn("Failed to load Remote Plugin",y.sent()),[3,7];case 7:return[2]}})})}))];case 1:return f.sent(),[2,h.filter(Boolean)]}})})})(t,n.integrations,A,s.obfuscate,v,g).catch(function(){return[]})];case 12:if(P=D.sent(),x=(0,o.ev)((0,o.ev)((0,o.ev)([eo,H],y,!0),b,!0),P,!0),C&&x.push(C),(null===(d=i.integrations)||void 0===d?void 0:d.All)===!1&&!i.integrations["Segment.io"]||i.integrations&&!1===i.integrations["Segment.io"])return[3,14];return O=(E=x).push,[4,function(e,t,r){window.addEventListener("pagehide",function(){h.push.apply(h,Array.from(p)),p.clear()});var n,i,s,a,c=null!==(i=null==t?void 0:t.apiKey)&&void 0!==i?i:"",h=e.options.disableClientPersistence?new w.Z(e.queue.queue.maxAttempts,[]):new _.$(e.queue.queue.maxAttempts,"".concat(c,":dest-Segment.io")),p=new Set,d=null!==(s=null==t?void 0:t.apiHost)&&void 0!==s?s:et.U,f=null!==(a=null==t?void 0:t.protocol)&&void 0!==a?a:"https",y="".concat(f,"://").concat(d),g=null==t?void 0:t.deliveryStrategy,v=(null==g?void 0:g.strategy)==="batching"?function(e,t){var r,n,i,s=[],a=!1,c=null!==(r=null==t?void 0:t.size)&&void 0!==r?r:10,l=null!==(n=null==t?void 0:t.timeout)&&void 0!==n?n:5e3;function sendBatch(t){if(0!==t.length){var r,n=null===(r=t[0])||void 0===r?void 0:r.writeKey,i=t.map(function(e){return e.sentAt,(0,o._T)(e,["sentAt"])});return(0,u.h)("https://".concat(e,"/b"),{keepalive:a,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({writeKey:n,batch:i,sentAt:new Date().toISOString()})})}}function flush(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){return s.length?(e=s,s=[],[2,sendBatch(e)]):[2]})})}return onPageChange(function(e){if((a=e)&&s.length){var t,r;Promise.all((t=[],r=0,s.forEach(function(e){kilobytes(t[r])>=64&&r++,t[r]?t[r].push(e):t[r]=[e]}),t).map(sendBatch)).catch(console.error)}}),{dispatch:function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return s.push(t),[2,s.length>=c||kilobytes(s)>=450||a?flush():void(i||(i=setTimeout(function(){i=void 0,flush().catch(console.error)},l)))]})})}}}(d,g.config):(n=null==g?void 0:g.config,{dispatch:function(e,t){return(0,u.h)(e,{keepalive:null==n?void 0:n.keepalive,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(t)})}});function send(n){return(0,o.mG)(this,void 0,void 0,function(){var i,s;return(0,o.Jh)(this,function(a){if((0,l.s)())return h.push(n),scheduleFlush(!1,h,m,scheduleFlush),[2,n];if(p.add(n),i=n.event.type.charAt(0),s=(0,X.D)(n.event).json(),"track"===n.event.type&&delete s.traits,"alias"===n.event.type){var u,c,d,f,g,b;u=s,b=e.user(),u.previousId=null!==(f=null!==(d=null!==(c=u.previousId)&&void 0!==c?c:u.from)&&void 0!==d?d:b.id())&&void 0!==f?f:b.anonymousId(),u.userId=null!==(g=u.userId)&&void 0!==g?g:u.to,delete u.from,delete u.to,s=u}return[2,v.dispatch("".concat(y,"/").concat(i),function(e,t,r,n){var i,s=e.user();delete t.options,t.writeKey=null==r?void 0:r.apiKey,t.userId=t.userId||s.id(),t.anonymousId=t.anonymousId||s.anonymousId(),t.sentAt=new Date;var a=e.queue.failedInitializations||[];a.length>0&&(t._metadata={failedInitializations:a});var u=[],c=[];for(var l in n){var h=n[l];"Segment.io"===l&&u.push(l),"bundled"===h.bundlingStatus&&u.push(l),"unbundled"===h.bundlingStatus&&c.push(l)}for(var p=0,d=(null==r?void 0:r.unbundledIntegrations)||[];p<d.length;p++){var f=d[p];c.includes(f)||c.push(f)}var y=null!==(i=null==r?void 0:r.maybeBundledConfigIds)&&void 0!==i?i:{},g=[];return u.sort().forEach(function(e){var t;(null!==(t=y[e])&&void 0!==t?t:[]).forEach(function(e){g.push(e)})}),(null==r?void 0:r.addBundledMetadata)!==!1&&(t._metadata=(0,o.pi)((0,o.pi)({},t._metadata),{bundled:u.sort(),unbundled:c.sort(),bundledIds:g})),t}(e,s,t,r)).then(function(){return n}).catch(function(){return h.pushWithBackoff(n),scheduleFlush(!1,h,m,scheduleFlush),n}).finally(function(){p.delete(n)})]})})}var m={name:"Segment.io",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:send,identify:send,page:send,alias:send,group:send,screen:send};return h.todo&&scheduleFlush(!1,h,m,scheduleFlush),m}(n,A["Segment.io"],t.integrations)];case 13:O.apply(E,[D.sent()]),D.label=14;case 14:return[4,n.register.apply(n,x)];case 15:if(T=D.sent(),!Object.entries(null!==(f=t.enabledMiddleware)&&void 0!==f?f:{}).some(function(e){return e[1]}))return[3,17];return[4,r.e(9214).then(r.bind(r,14783)).then(function(e){var r=e.remoteMiddlewares;return(0,o.mG)(j,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,r(T,t,s.obfuscate)];case 1:return[2,Promise.all(e.sent().map(function(e){return n.addSourceMiddleware(e)}))]}})})})];case 16:D.sent(),D.label=17;case 17:return[2,T]}})})}(e.writeKey,y,b,m,t,k,C)];case 4:if(S=E.sent(),A=null!==(d=window.location.search)&&void 0!==d?d:"",P=null!==(f=window.location.hash)&&void 0!==f?f:"",!(x=A.length?A:P.replace(/(?=#).*(?=\?)/,"")).includes("ajs_"))return[3,6];return[4,b.queryString(x).catch(console.error)];case 5:E.sent(),E.label=6;case 6:return b.initialized=!0,b.emit("initialize",e,t),t.initialPageview&&b.page().catch(console.error),[4,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,o.mG)(void 0,void 0,void 0,function(){var r,n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:r=0,n=t.getCalls("addSourceMiddleware"),i.label=1;case 1:if(!(r<n.length))return[3,4];return[4,callAnalyticsMethod(e,n[r]).catch(console.error)];case 2:i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return[2]}})})];case 1:return r.sent(),flushAnalyticsCallsInNewTask(e,t),t.clear(),[2]}})})}(b,n)];case 7:return E.sent(),[2,[b,S]]}})})}(t[0],t[1],e)})})||this)._resolveLoadStart=function(e,t){return s([e,t])},t}return(0,o.ZT)(AnalyticsBrowser,e),AnalyticsBrowser.prototype.load=function(e,t){return void 0===t&&(t={}),this._resolveLoadStart(e,t),this},AnalyticsBrowser.load=function(e,t){return void 0===t&&(t={}),new AnalyticsBrowser().load(e,t)},AnalyticsBrowser.standalone=function(e,t){return AnalyticsBrowser.load({writeKey:e},t).then(function(e){return e[0]})},AnalyticsBrowser}(U)},65904:function(e,t,r){"use strict";r.d(t,{G:function(){return isOnline},s:function(){return isOffline}});var n=r(69699);function isOnline(){return!(0,n.j)()||window.navigator.onLine}function isOffline(){return!isOnline()}},36514:function(e,t,r){"use strict";r.d(t,{U:function(){return n}});var n="api.segment.io/v1"},29784:function(e,t,r){"use strict";r.d(t,{_:function(){return s}});var n=r(97582),i=r(98191),o=r(42718),s=function(e){function Context(t,r){return e.call(this,t,r,new o.j)||this}return(0,n.ZT)(Context,e),Context.system=function(){return new this({type:"track",event:"system"})},Context}(i._)},69699:function(e,t,r){"use strict";function isBrowser(){return"undefined"!=typeof window}function isServer(){return!isBrowser()}r.d(t,{j:function(){return isBrowser},s:function(){return isServer}})},67475:function(e,t,r){"use strict";function gracefulDecodeURIComponent(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}r.d(t,{a:function(){return gracefulDecodeURIComponent}})},42718:function(e,t,r){"use strict";r.d(t,{j:function(){return h}});var n,i=r(97582),o=r(50732),s=r(55609),a=r(39821),u=r(7227),c=r(36514),createRemoteMetric=function(e,t,r){var n=t.reduce(function(e,t){var r=t.split(":"),n=r[0],i=r[1];return e[n]=i,e},{});return{type:"Counter",metric:e,value:1,tags:(0,i.pi)((0,i.pi)({},n),{library:"analytics.js",library_version:"web"===r?"next-".concat(a.i):"npm:next-".concat(a.i)})}};function logError(e){console.error("Error sending segment performance metrics",e)}var l=function(){function RemoteMetrics(e){var t,r,n,i,o=this;if(this.host=null!==(t=null==e?void 0:e.host)&&void 0!==t?t:c.U,this.sampleRate=null!==(r=null==e?void 0:e.sampleRate)&&void 0!==r?r:1,this.flushTimer=null!==(n=null==e?void 0:e.flushTimer)&&void 0!==n?n:3e4,this.maxQueueSize=null!==(i=null==e?void 0:e.maxQueueSize)&&void 0!==i?i:20,this.queue=[],this.sampleRate>0){var s=!1,run_1=function(){s||(s=!0,o.flush().catch(logError),s=!1,setTimeout(run_1,o.flushTimer))};run_1()}}return RemoteMetrics.prototype.increment=function(e,t){if(!(!e.includes("analytics_js.")||0===t.length||Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var r=createRemoteMetric(e,t,(0,u.B)());this.queue.push(r),e.includes("error")&&this.flush().catch(logError)}},RemoteMetrics.prototype.flush=function(){return(0,i.mG)(this,void 0,void 0,function(){var e=this;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if(this.queue.length<=0)return[2];return[4,this.send().catch(function(t){logError(t),e.sampleRate=0})];case 1:return t.sent(),[2]}})})},RemoteMetrics.prototype.send=function(){return(0,i.mG)(this,void 0,void 0,function(){var e,t,r;return(0,i.Jh)(this,function(n){return e={series:this.queue},this.queue=[],t={"Content-Type":"text/plain"},r="https://".concat(this.host,"/m"),[2,(0,s.h)(r,{headers:t,body:JSON.stringify(e),method:"POST"})]})})},RemoteMetrics}(),h=function(e){function Stats(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(Stats,e),Stats.initRemoteMetrics=function(e){n=new l(e)},Stats.prototype.increment=function(t,r,i){e.prototype.increment.call(this,t,r,i),null==n||n.increment(t,null!=i?i:[])},Stats}(o.s)},39821:function(e,t,r){"use strict";r.d(t,{i:function(){return n}});var n="1.59.0"},55609:function(e,t,r){"use strict";r.d(t,{h:function(){return fetch}});var n=r(63144),i=r.n(n),o=r(44083),fetch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,o.R)();return(r&&r.fetch||i()).apply(void 0,e)}},44083:function(e,t,r){"use strict";r.d(t,{R:function(){return getGlobal}});var getGlobal=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:null}},74939:function(e,t,r){"use strict";r.d(t,{jV:function(){return setGlobalAnalyticsKey},ql:function(){return setGlobalAnalytics},wI:function(){return getGlobalAnalytics}});var n="analytics";function getGlobalAnalytics(){return window[n]}function setGlobalAnalyticsKey(e){n=e}function setGlobalAnalytics(e){window[n]=e}},66548:function(e,t,r){"use strict";function findScript(e){return Array.prototype.slice.call(window.document.querySelectorAll("script")).find(function(t){return t.src===e})}function loadScript(e,t){var r=findScript(e);if(void 0!==r){var n=null==r?void 0:r.getAttribute("status");if("loaded"===n)return Promise.resolve(r);if("loading"===n)return new Promise(function(e,t){r.addEventListener("load",function(){return e(r)}),r.addEventListener("error",function(e){return t(e)})})}return new Promise(function(r,n){var i,o=window.document.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,o.setAttribute("status","loading");for(var s=0,a=Object.entries(null!=t?t:{});s<a.length;s++){var u=a[s],c=u[0],l=u[1];o.setAttribute(c,l)}o.onload=function(){o.onerror=o.onload=null,o.setAttribute("status","loaded"),r(o)},o.onerror=function(){o.onerror=o.onload=null,o.setAttribute("status","error"),n(Error("Failed to load ".concat(e)))};var h=window.document.getElementsByTagName("script")[0];null===(i=h.parentElement)||void 0===i||i.insertBefore(o,h)})}function unloadScript(e){var t=findScript(e);return void 0!==t&&t.remove(),Promise.resolve()}r.d(t,{t:function(){return unloadScript},v:function(){return loadScript}})},913:function(e,t,r){"use strict";r.d(t,{o:function(){return mergedOptions}});var n=r(97582);function mergedOptions(e,t){var r,i=Object.entries(null!==(r=t.integrations)&&void 0!==r?r:{}).reduce(function(e,t){var r,i,o=t[0],s=t[1];return"object"==typeof s?(0,n.pi)((0,n.pi)({},e),((r={})[o]=s,r)):(0,n.pi)((0,n.pi)({},e),((i={})[o]={},i))},{});return Object.entries(e.integrations).reduce(function(e,t){var r,o=t[0],s=t[1];return(0,n.pi)((0,n.pi)({},e),((r={})[o]=(0,n.pi)((0,n.pi)({},s),i[o]),r))},{})}},56749:function(e,t,r){"use strict";r.d(t,{x:function(){return pWhile}});var n=r(97582),pWhile=function(e,t){return(0,n.mG)(void 0,void 0,void 0,function(){var r;return(0,n.Jh)(this,function(i){return[2,(r=function(i){return(0,n.mG)(void 0,void 0,void 0,function(){var o;return(0,n.Jh)(this,function(n){switch(n.label){case 0:if(!e(i))return[3,2];return o=r,[4,t()];case 1:return[2,o.apply(void 0,[n.sent()])];case 2:return[2]}})})})(void 0)]})})}},99382:function(e,t,r){"use strict";r.d(t,{Kg:function(){return getNextIntegrationsURL},UH:function(){return setGlobalCDNUrl},Vl:function(){return getCDN}});var n,i=r(74939),o=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,getCDNUrlFromScriptTag=function(){var e;return Array.prototype.slice.call(document.querySelectorAll("script")).forEach(function(t){var r,n=null!==(r=t.getAttribute("src"))&&void 0!==r?r:"",i=o.exec(n);i&&i[1]&&(e=i[1])}),e},getGlobalCDNUrl=function(){var e;return null!=n?n:null===(e=(0,i.wI)())||void 0===e?void 0:e._cdn},setGlobalCDNUrl=function(e){var t=(0,i.wI)();t&&(t._cdn=e),n=e},getCDN=function(){var e=getGlobalCDNUrl();return e?e:getCDNUrlFromScriptTag()||"https://cdn.segment.com"},getNextIntegrationsURL=function(){var e=getCDN();return"".concat(e,"/next-integrations")}},65976:function(e,t,r){"use strict";r.d(t,{$:function(){return u}});var n=r(97582),i=r(51181),o=r(29784),s=r(69699),a={getItem:function(){},setItem:function(){},removeItem:function(){}};try{a=(0,s.j)()&&window.localStorage?window.localStorage:a}catch(e){console.warn("Unable to access localStorage",e)}function persisted(e){var t=a.getItem(e);return(t?JSON.parse(t):[]).map(function(e){return new o._(e.event,e.id)})}function seen(e){var t=a.getItem(e);return t?JSON.parse(t):{}}function remove(e){a.removeItem(e)}function mutex(e,t,r){void 0===r&&(r=0);var n="persisted-queue:v1:".concat(e,":lock"),i=a.getItem(n),o=i?JSON.parse(i):null,s=null===o||new Date().getTime()>o;if(s){a.setItem(n,JSON.stringify(new Date().getTime()+50)),t(),a.removeItem(n);return}!s&&r<3?setTimeout(function(){mutex(e,t,r+1)},50):console.error("Unable to retrieve lock")}var u=function(e){function PersistedPriorityQueue(t,r){var i=e.call(this,t,[])||this,o="persisted-queue:v1:".concat(r,":items"),s="persisted-queue:v1:".concat(r,":seen"),u=[],c={};return mutex(r,function(){try{u=persisted(o),c=seen(s),remove(o),remove(s),i.queue=(0,n.ev)((0,n.ev)([],u,!0),i.queue,!0),i.seen=(0,n.pi)((0,n.pi)({},c),i.seen)}catch(e){console.error(e)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var e=(0,n.ev)((0,n.ev)([],i.queue,!0),i.future,!0);try{mutex(r,function(){var t,r,u,c;t=persisted(o),r=(0,n.ev)((0,n.ev)([],e,!0),t,!0).reduce(function(e,t){var r;return(0,n.pi)((0,n.pi)({},e),((r={})[t.id]=t,r))},{}),a.setItem(o,JSON.stringify(Object.values(r))),u=i.seen,c=seen(s),a.setItem(s,JSON.stringify((0,n.pi)((0,n.pi)({},c),u)))})}catch(e){console.error(e)}}}),i}return(0,n.ZT)(PersistedPriorityQueue,e),PersistedPriorityQueue}(i.Z)},23888:function(e,t,r){"use strict";r.d(t,{D:function(){return toFacade}});var n=r(49969);function toFacade(e,t){var r=new n.Facade(e,t);return"track"===e.type&&(r=new n.Track(e,t)),"identify"===e.type&&(r=new n.Identify(e,t)),"page"===e.type&&(r=new n.Page(e,t)),"alias"===e.type&&(r=new n.Alias(e,t)),"group"===e.type&&(r=new n.Group(e,t)),"screen"===e.type&&(r=new n.Screen(e,t)),Object.defineProperty(r,"obj",{value:e,writable:!0}),r}},7227:function(e,t,r){"use strict";function getVersionType(){return"npm"}r.d(t,{B:function(){return getVersionType}})},66170:function(e,t,r){"use strict";r.r(t),r.d(t,{applyDestinationMiddleware:function(){return applyDestinationMiddleware},sourceMiddlewarePlugin:function(){return sourceMiddlewarePlugin}});var n=r(97582),i=r(98191),o=r(23888);function applyDestinationMiddleware(e,t,r){return(0,n.mG)(this,void 0,void 0,function(){var i,s,a,u,c;return(0,n.Jh)(this,function(l){switch(l.label){case 0:i=(0,o.D)(t,{clone:!0,traverse:!1}).rawEvent(),s=0,a=r,l.label=1;case 1:if(!(s<a.length))return[3,4];return u=a[s],[4,function(t,r){return(0,n.mG)(this,void 0,void 0,function(){var i,s,a;return(0,n.Jh)(this,function(u){switch(u.label){case 0:return i=!1,s=null,[4,r({payload:(0,o.D)(t,{clone:!0,traverse:!1}),integration:e,next:function(e){i=!0,null===e&&(s=null),e&&(s=e.obj)}})];case 1:return u.sent(),i||null===s||(s.integrations=(0,n.pi)((0,n.pi)({},t.integrations),((a={})[e]=!1,a))),[2,s]}})})}(i,u)];case 2:if(null===(c=l.sent()))return[2,null];i=c,l.label=3;case 3:return s++,[3,1];case 4:return[2,i]}})})}function sourceMiddlewarePlugin(e,t){function apply(r){return(0,n.mG)(this,void 0,void 0,function(){var s;return(0,n.Jh)(this,function(n){switch(n.label){case 0:return s=!1,[4,e({payload:(0,o.D)(r.event,{clone:!0,traverse:!1}),integrations:null!=t?t:{},next:function(e){s=!0,e&&(r.event=e.obj)}})];case 1:if(n.sent(),!s)throw new i.Y({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,r]}})})}return{name:"Source Middleware ".concat(e.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(e){return Promise.resolve(e)},track:apply,page:apply,identify:apply,alias:apply,group:apply}}},16025:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(53410));function trait(e,t){return function(){var r=this.traits(),n=this.properties?this.properties():{};return i.default(r,"address."+e)||i.default(r,e)||(t?i.default(r,"address."+t):null)||(t?i.default(r,t):null)||i.default(n,"address."+e)||i.default(n,e)||(t?i.default(n,"address."+t):null)||(t?i.default(n,t):null)}}t.default=function(e){e.zip=trait("postalCode","zip"),e.country=trait("country"),e.street=trait("street"),e.state=trait("state"),e.city=trait("city"),e.region=trait("region")}},36576:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Alias=void 0;var i=n(r(35717)),o=r(40747);function Alias(e,t){o.Facade.call(this,e,t)}t.Alias=Alias,i.default(Alias,o.Facade),Alias.prototype.action=function(){return"alias"},Alias.prototype.type=Alias.prototype.action,Alias.prototype.previousId=function(){return this.field("previousId")||this.field("from")},Alias.prototype.from=Alias.prototype.previousId,Alias.prototype.userId=function(){return this.field("userId")||this.field("to")},Alias.prototype.to=Alias.prototype.userId},83948:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function clone(e){if("object"!=typeof e)return e;if("[object Object]"===Object.prototype.toString.call(e)){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=clone(e[r]));return t}return Array.isArray(e)?e.map(clone):e}},85655:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Delete=void 0;var i=n(r(35717)),o=r(40747);function Delete(e,t){o.Facade.call(this,e,t)}t.Delete=Delete,i.default(Delete,o.Facade),Delete.prototype.type=function(){return"delete"}},40747:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Facade=void 0;var i=n(r(16025)),o=r(83948),s=n(r(2530)),a=n(r(18013)),u=n(r(53410)),c=n(r(28595));function Facade(e,t){t=t||{},this.raw=o.clone(e),"clone"in t||(t.clone=!0),t.clone&&(e=o.clone(e)),"traverse"in t||(t.traverse=!0),"timestamp"in e?e.timestamp=a.default(e.timestamp):e.timestamp=new Date,t.traverse&&c.default(e),this.opts=t,this.obj=e}t.Facade=Facade;var l=Facade.prototype;function transform(e){return o.clone(e)}l.proxy=function(e){var t,r=e.split("."),n=this[e=r.shift()]||this.obj[e];return n?("function"==typeof n&&(n=n.call(this)||{}),0===r.length||(n=u.default(n,r.join("."))),this.opts.clone?(t=n,o.clone(t)):n):n},l.field=function(e){var t,r=this.obj[e];return this.opts.clone?(t=r,o.clone(t)):r},Facade.proxy=function(e){return function(){return this.proxy(e)}},Facade.field=function(e){return function(){return this.field(e)}},Facade.multi=function(e){return function(){var t=this.proxy(e+"s");if(Array.isArray(t))return t;var r=this.proxy(e);return r&&(r=[this.opts.clone?o.clone(r):r]),r||[]}},Facade.one=function(e){return function(){var t=this.proxy(e);if(t)return t;var r=this.proxy(e+"s");if(Array.isArray(r))return r[0]}},l.json=function(){var e=this.opts.clone?o.clone(this.obj):this.obj;return this.type&&(e.type=this.type()),e},l.rawEvent=function(){return this.raw},l.options=function(e){var t=this.obj.options||this.obj.context||{},r=this.opts.clone?o.clone(t):t;if(!e)return r;if(this.enabled(e)){var n=this.integrations(),i=n[e]||u.default(n,e);return"object"!=typeof i&&(i=u.default(this.options(),e)),"object"==typeof i?i:{}}},l.context=l.options,l.enabled=function(e){var t=this.proxy("options.providers.all");"boolean"!=typeof t&&(t=this.proxy("options.all")),"boolean"!=typeof t&&(t=this.proxy("integrations.all")),"boolean"!=typeof t&&(t=!0);var r=t&&s.default(e),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(e)&&(r=n.providers[e]),n.hasOwnProperty(e)){var i=n[e];r="boolean"!=typeof i||i}return!!r},l.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},l.active=function(){var e=this.proxy("options.active");return null==e&&(e=!0),e},l.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},l.sessionId=l.anonymousId,l.groupId=Facade.proxy("options.groupId"),l.traits=function(e){var t=this.proxy("options.traits")||{},r=this.userId();for(var n in e=e||{},r&&(t.id=r),e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=null==this[n]?this.proxy("options.traits."+n):this[n]();if(null==i)continue;t[e[n]]=i,delete t[n]}return t},l.library=function(){var e=this.proxy("options.library");return e?"string"==typeof e?{name:e,version:null}:e:{name:"unknown",version:null}},l.device=function(){var e=this.proxy("context.device");("object"!=typeof e||null===e)&&(e={});var t=this.library().name;return e.type||(t.indexOf("ios")>-1&&(e.type="ios"),t.indexOf("android")>-1&&(e.type="android")),e},l.userAgent=Facade.proxy("context.userAgent"),l.timezone=Facade.proxy("context.timezone"),l.timestamp=Facade.field("timestamp"),l.channel=Facade.field("channel"),l.ip=Facade.proxy("context.ip"),l.userId=Facade.field("userId"),i.default(l)},63789:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;var i=n(r(35717)),o=n(r(66243)),s=n(r(18013)),a=r(40747);function Group(e,t){a.Facade.call(this,e,t)}t.Group=Group,i.default(Group,a.Facade);var u=Group.prototype;u.action=function(){return"group"},u.type=u.action,u.groupId=a.Facade.field("groupId"),u.created=function(){var e=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(e)return s.default(e)},u.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.groupId();if(o.default(t))return t},u.traits=function(e){var t=this.properties(),r=this.groupId();for(var n in e=e||{},r&&(t.id=r),e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=null==this[n]?this.proxy("traits."+n):this[n]();if(null==i)continue;t[e[n]]=i,delete t[n]}return t},u.name=a.Facade.proxy("traits.name"),u.industry=a.Facade.proxy("traits.industry"),u.employees=a.Facade.proxy("traits.employees"),u.properties=function(){return this.field("traits")||this.field("properties")||{}}},98649:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Identify=void 0;var i=r(40747),o=n(r(53410)),s=n(r(35717)),a=n(r(66243)),u=n(r(18013)),trim=function(e){return e.trim()};function Identify(e,t){i.Facade.call(this,e,t)}t.Identify=Identify,s.default(Identify,i.Facade);var c=Identify.prototype;c.action=function(){return"identify"},c.type=c.action,c.traits=function(e){var t=this.field("traits")||{},r=this.userId();for(var n in e=e||{},r&&(t.id=r),e){var i=null==this[n]?this.proxy("traits."+n):this[n]();null!=i&&(t[e[n]]=i,n!==e[n]&&delete t[n])}return t},c.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.userId();if(a.default(t))return t},c.created=function(){var e=this.proxy("traits.created")||this.proxy("traits.createdAt");if(e)return u.default(e)},c.companyCreated=function(){var e=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(e)return u.default(e)},c.companyName=function(){return this.proxy("traits.company.name")},c.name=function(){var e=this.proxy("traits.name");if("string"==typeof e)return trim(e);var t=this.firstName(),r=this.lastName();if(t&&r)return trim(t+" "+r)},c.firstName=function(){var e=this.proxy("traits.firstName");if("string"==typeof e)return trim(e);var t=this.proxy("traits.name");if("string"==typeof t)return trim(t).split(" ")[0]},c.lastName=function(){var e=this.proxy("traits.lastName");if("string"==typeof e)return trim(e);var t=this.proxy("traits.name");if("string"==typeof t){var r=trim(t).indexOf(" ");if(-1!==r)return trim(t.substr(r+1))}},c.uid=function(){return this.userId()||this.username()||this.email()},c.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},c.age=function(){var e=this.birthday(),t=o.default(this.traits(),"age");return null!=t?t:e instanceof Date?new Date().getFullYear()-e.getFullYear():void 0},c.avatar=function(){var e=this.traits();return o.default(e,"avatar")||o.default(e,"photoUrl")||o.default(e,"avatarUrl")},c.position=function(){var e=this.traits();return o.default(e,"position")||o.default(e,"jobTitle")},c.username=i.Facade.proxy("traits.username"),c.website=i.Facade.one("traits.website"),c.websites=i.Facade.multi("traits.website"),c.phone=i.Facade.one("traits.phone"),c.phones=i.Facade.multi("traits.phone"),c.address=i.Facade.proxy("traits.address"),c.gender=i.Facade.proxy("traits.gender"),c.birthday=i.Facade.proxy("traits.birthday")},49969:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Delete=t.Screen=t.Page=t.Track=t.Identify=t.Group=t.Alias=t.Facade=void 0;var i=r(40747);Object.defineProperty(t,"Facade",{enumerable:!0,get:function(){return i.Facade}});var o=r(36576);Object.defineProperty(t,"Alias",{enumerable:!0,get:function(){return o.Alias}});var s=r(63789);Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return s.Group}});var a=r(98649);Object.defineProperty(t,"Identify",{enumerable:!0,get:function(){return a.Identify}});var u=r(27286);Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return u.Track}});var c=r(83070);Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return c.Page}});var l=r(69860);Object.defineProperty(t,"Screen",{enumerable:!0,get:function(){return l.Screen}});var h=r(85655);Object.defineProperty(t,"Delete",{enumerable:!0,get:function(){return h.Delete}}),t.default=n(n({},i.Facade),{Alias:o.Alias,Group:s.Group,Identify:a.Identify,Track:u.Track,Page:c.Page,Screen:l.Screen,Delete:h.Delete})},66243:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/.+\@.+\..+/;t.default=function(e){return r.test(e)}},2530:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={Salesforce:!0};t.default=function(e){return!r[e]}},83070:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Page=void 0;var i=n(r(35717)),o=r(40747),s=r(27286),a=n(r(66243));function Page(e,t){o.Facade.call(this,e,t)}t.Page=Page,i.default(Page,o.Facade);var u=Page.prototype;u.action=function(){return"page"},u.type=u.action,u.category=o.Facade.field("category"),u.name=o.Facade.field("name"),u.title=o.Facade.proxy("properties.title"),u.path=o.Facade.proxy("properties.path"),u.url=o.Facade.proxy("properties.url"),u.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},u.properties=function(e){var t=this.field("properties")||{},r=this.category(),n=this.name();for(var i in e=e||{},r&&(t.category=r),n&&(t.name=n),e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=null==this[i]?this.proxy("properties."+i):this[i]();if(null==o)continue;t[e[i]]=o,i!==e[i]&&delete t[i]}return t},u.email=function(){var e=this.proxy("context.traits.email")||this.proxy("properties.email");if(e)return e;var t=this.userId();if(a.default(t))return t},u.fullName=function(){var e=this.category(),t=this.name();return t&&e?e+" "+t:t},u.event=function(e){return e?"Viewed "+e+" Page":"Loaded a Page"},u.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new s.Track(t,this.opts)}},69860:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=void 0;var i=n(r(35717)),o=r(83070),s=r(27286);function Screen(e,t){o.Page.call(this,e,t)}t.Screen=Screen,i.default(Screen,o.Page),Screen.prototype.action=function(){return"screen"},Screen.prototype.type=Screen.prototype.action,Screen.prototype.event=function(e){return e?"Viewed "+e+" Screen":"Loaded a Screen"},Screen.prototype.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new s.Track(t,this.opts)}},27286:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;var i=n(r(35717)),o=r(40747),s=r(98649),a=n(r(66243)),u=n(r(53410));function Track(e,t){o.Facade.call(this,e,t)}t.Track=Track,i.default(Track,o.Facade);var c=Track.prototype;c.action=function(){return"track"},c.type=c.action,c.event=o.Facade.field("event"),c.value=o.Facade.proxy("properties.value"),c.category=o.Facade.proxy("properties.category"),c.id=o.Facade.proxy("properties.id"),c.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},c.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},c.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},c.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},c.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},c.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},c.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},c.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},c.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},c.sku=o.Facade.proxy("properties.sku"),c.tax=o.Facade.proxy("properties.tax"),c.name=o.Facade.proxy("properties.name"),c.price=o.Facade.proxy("properties.price"),c.total=o.Facade.proxy("properties.total"),c.repeat=o.Facade.proxy("properties.repeat"),c.coupon=o.Facade.proxy("properties.coupon"),c.shipping=o.Facade.proxy("properties.shipping"),c.discount=o.Facade.proxy("properties.discount"),c.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},c.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},c.description=o.Facade.proxy("properties.description"),c.plan=o.Facade.proxy("properties.plan"),c.subtotal=function(){var e=u.default(this.properties(),"subtotal"),t=this.total()||this.revenue();if(e)return e;if(!t)return 0;if(this.total()){var r=this.tax();r&&(t-=r),(r=this.shipping())&&(t-=r),(r=this.discount())&&(t+=r)}return t},c.products=function(){var e=this.properties(),t=u.default(e,"products");return Array.isArray(t)?t.filter(function(e){return null!==e}):[]},c.quantity=function(){return(this.obj.properties||{}).quantity||1},c.currency=function(){return(this.obj.properties||{}).currency||"USD"},c.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},c.query=o.Facade.proxy("options.query"),c.properties=function(e){var t=this.field("properties")||{};for(var r in e=e||{})if(Object.prototype.hasOwnProperty.call(e,r)){var n=null==this[r]?this.proxy("properties."+r):this[r]();if(null==n)continue;t[e[r]]=n,delete t[r]}return t},c.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},c.email=function(){var e=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(e)return e;var t=this.userId();if(a.default(t))return t},c.revenue=function(){var e=this.proxy("properties.revenue"),t=this.event();return!e&&t&&t.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(e=this.proxy("properties.total")),function(e){if(e&&("number"==typeof e||"string"==typeof e&&!isNaN(e=parseFloat(e=e.replace(/\$/g,"")))))return e}(e)},c.cents=function(){var e=this.revenue();return"number"!=typeof e?this.value()||0:100*e},c.identify=function(){var e=this.json();return e.traits=this.traits(),new s.Identify(e,this.opts)}},28595:function(e,t,r){"use strict";var n=r(28336);e.exports=function traverse(e,t){var r,i;return(void 0===t&&(t=!0),e&&"object"==typeof e)?(r=t,Object.keys(e).forEach(function(t){e[t]=traverse(e[t],r)}),e):Array.isArray(e)?(i=t,e.forEach(function(t,r){e[r]=traverse(t,i)}),e):n.is(e,t)?n.parse(e):e}},28336:function(e,t){"use strict";var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;t.parse=function(e){var t=[1,5,6,7,11,12],n=r.exec(e),i=0;if(!n)return new Date(e);for(var o,s=0;o=t[s];s++)n[o]=parseInt(n[o],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0," "===n[4]?i=new Date().getTimezoneOffset():"Z"!==n[9]&&n[10]&&(i=60*n[11]+n[12],"+"===n[10]&&(i=0-i));var a=Date.UTC(n[1],n[2],n[3],n[5],n[6]+i,n[7],n[8]);return new Date(a)},t.is=function(e,t){return"string"==typeof e&&(!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&r.test(e)}},59435:function(e){function plural(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}e.exports=function(e,t){t=t||{};var r,n,i=typeof e;if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===i&&isFinite(e))return t.long?(r=Math.abs(e))>=864e5?plural(e,r,864e5,"day"):r>=36e5?plural(e,r,36e5,"hour"):r>=6e4?plural(e,r,6e4,"minute"):r>=1e3?plural(e,r,1e3,"second"):e+" ms":(n=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":n>=36e5?Math.round(e/36e5)+"h":n>=6e4?Math.round(e/6e4)+"m":n>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},11227:function(e,t,r){let n;var i=r(34155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e},t.useColors=function(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(n=!1,()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(82447)(t);let{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},82447:function(e,t,r){e.exports=function(e){function createDebug(e){let t,r,n;let i=null;function debug(...e){if(!debug.enabled)return;let r=Number(new Date),n=r-(t||r);debug.diff=n,debug.prev=t,debug.curr=r,t=r,e[0]=createDebug.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,r)=>{if("%%"===t)return"%";i++;let n=createDebug.formatters[r];if("function"==typeof n){let r=e[i];t=n.call(debug,r),e.splice(i,1),i--}return t}),createDebug.formatArgs.call(debug,e);let o=debug.log||createDebug.log;o.apply(debug,e)}return debug.namespace=e,debug.useColors=createDebug.useColors(),debug.color=createDebug.selectColor(e),debug.extend=extend,debug.destroy=createDebug.destroy,Object.defineProperty(debug,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(r!==createDebug.namespaces&&(r=createDebug.namespaces,n=createDebug.enabled(e)),n),set:e=>{i=e}}),"function"==typeof createDebug.init&&createDebug.init(debug),debug}function extend(e,t){let r=createDebug(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function toNamespace(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function(){let e=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map(e=>"-"+e)].join(",");return createDebug.enable(""),e},createDebug.enable=function(e){let t;createDebug.save(e),createDebug.namespaces=e,createDebug.names=[],createDebug.skips=[];let r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(RegExp("^"+e.slice(1)+"$")):createDebug.names.push(RegExp("^"+e+"$")))},createDebug.enabled=function(e){let t,r;if("*"===e[e.length-1])return!0;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(59435),createDebug.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(t=>{createDebug[t]=e[t]}),createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]},createDebug.enable(createDebug.load()),createDebug}},35717:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var TempCtor=function(){};TempCtor.prototype=t.prototype,e.prototype=new TempCtor,e.prototype.constructor=e}}},18013:function(e,t,r){"use strict";var n=r(28336),i=r(18040),o=r(24085),s=Object.prototype.toString;e.exports=function(e){return"[object Date]"===s.call(e)?e:"[object Number]"===s.call(e)?new Date(e<315576e5?1e3*e:e):n.is(e)?n.parse(e):i.is(e)?i.parse(e):o.is(e)?o.parse(e):new Date(e)}},18040:function(e,t){"use strict";var r=/\d{13}/;t.is=function(e){return r.test(e)},t.parse=function(e){return e=parseInt(e,10),new Date(e)}},24085:function(e,t){"use strict";var r=/\d{10}/;t.is=function(e){return r.test(e)},t.parse=function(e){var t=1e3*parseInt(e,10);return new Date(t)}},63144:function(e){"use strict";let t=self.fetch.bind(self);e.exports=t,e.exports.default=e.exports},53410:function(e){function multiple(e){return function(t,r,n,i){var o,s=i&&"function"==typeof i.normalizer?i.normalizer:defaultNormalize;r=s(r);for(var a=!1;!a;)!function(){for(o in t){var e=s(o);if(0===r.indexOf(e)){var n=r.substr(e.length);if("."===n.charAt(0)||0===n.length){r=n.substr(1);var i=t[o];if(null==i||!r.length){a=!0;return}t=i;return}}}o=void 0,a=!0}();if(o)return null==t?t:e(t,o,n)}}function del(e,t){return e.hasOwnProperty(t)&&delete e[t],e}function replace(e,t,r){return e.hasOwnProperty(t)&&(e[t]=r),e}function defaultNormalize(e){return e.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}e.exports=multiple(function(e,t){if(e.hasOwnProperty(t))return e[t]}),e.exports.find=e.exports,e.exports.replace=function(e,t,r,n){return multiple(replace).call(this,e,t,r,n),e},e.exports.del=function(e,t,r){return multiple(del).call(this,e,t,null,r),e}},13723:function(e){e.exports.DEFAULT_LIVE_UPDATE_PORT=8088,e.exports.LIVE_UPDATE_EVENT_NAME="props_changed",e.exports.LIVE_UPDATE_NAMESPACE="/nextjs-live-updates"},41626:function(e,t,r){let n=r(67294),{withRouter:i}=r(11163),o=r(57046),{DEFAULT_LIVE_UPDATE_PORT:s,LIVE_UPDATE_EVENT_NAME:a,LIVE_UPDATE_NAMESPACE:u}=r(13723);e.exports.G=function(e){let Component=class Component extends n.Component{componentDidMount(){if(!this.props.liveUpdate)return;let e=void 0!==this.props.liveUpdatePort?this.props.liveUpdatePort||location.port:s,t=this.props.liveUpdateEventName||a,r=this.props.liveUpdateNamespace||u;this.socket=o(`${location.protocol}//${location.hostname}${e?`:${e}`:""}${r}`),this.socket.on(t,()=>{this.props.router.replace(this.props.router.pathname,this.props.router.asPath,{scroll:!1})}),this.socket.on("connect",()=>{this.socket.emit("hello")})}componentWillUnmount(){this.props.liveUpdate&&this.socket&&this.socket.close()}render(){return n.createElement(e,this.props,null)}};return Component.displayName=`WithRemoteDataUpdates(${e.displayName||e.name||"Component"})`,i(Component)}},8322:function(e){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function md5cycle(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];r+=(n&i|~n&o)+t[0]-680876936|0,o+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0,i+=((o=(o<<12|o>>>20)+r|0)&r|~o&n)+t[2]+606105819|0,n+=((i=(i<<17|i>>>15)+o|0)&o|~i&r)+t[3]-1044525330|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&o)+t[4]-176418897|0,o+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0,i+=((o=(o<<12|o>>>20)+r|0)&r|~o&n)+t[6]-1473231341|0,n+=((i=(i<<17|i>>>15)+o|0)&o|~i&r)+t[7]-45705983|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&o)+t[8]+1770035416|0,o+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0,i+=((o=(o<<12|o>>>20)+r|0)&r|~o&n)+t[10]-42063|0,n+=((i=(i<<17|i>>>15)+o|0)&o|~i&r)+t[11]-1990404162|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&o)+t[12]+1804603682|0,o+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0,i+=((o=(o<<12|o>>>20)+r|0)&r|~o&n)+t[14]-1502002290|0,n+=((i=(i<<17|i>>>15)+o|0)&o|~i&r)+t[15]+1236535329|0,r+=((n=(n<<22|n>>>10)+i|0)&o|i&~o)+t[1]-165796510|0,o+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0,i+=((o=(o<<9|o>>>23)+r|0)&n|r&~n)+t[11]+643717713|0,n+=((i=(i<<14|i>>>18)+o|0)&r|o&~r)+t[0]-373897302|0,r+=((n=(n<<20|n>>>12)+i|0)&o|i&~o)+t[5]-701558691|0,o+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0,i+=((o=(o<<9|o>>>23)+r|0)&n|r&~n)+t[15]-660478335|0,n+=((i=(i<<14|i>>>18)+o|0)&r|o&~r)+t[4]-405537848|0,r+=((n=(n<<20|n>>>12)+i|0)&o|i&~o)+t[9]+568446438|0,o+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0,i+=((o=(o<<9|o>>>23)+r|0)&n|r&~n)+t[3]-187363961|0,n+=((i=(i<<14|i>>>18)+o|0)&r|o&~r)+t[8]+1163531501|0,r+=((n=(n<<20|n>>>12)+i|0)&o|i&~o)+t[13]-1444681467|0,o+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0,i+=((o=(o<<9|o>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0,n+=((i=(i<<14|i>>>18)+o|0)&r|o&~r)+t[12]-1926607734|0,r+=((n=(n<<20|n>>>12)+i|0)^i^o)+t[5]-378558|0,o+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0,i+=((o=(o<<11|o>>>21)+r|0)^r^n)+t[11]+1839030562|0,n+=((i=(i<<16|i>>>16)+o|0)^o^r)+t[14]-35309556|0,r+=((n=(n<<23|n>>>9)+i|0)^i^o)+t[1]-1530992060|0,o+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0,i+=((o=(o<<11|o>>>21)+r|0)^r^n)+t[7]-155497632|0,n+=((i=(i<<16|i>>>16)+o|0)^o^r)+t[10]-1094730640|0,r+=((n=(n<<23|n>>>9)+i|0)^i^o)+t[13]+681279174|0,o+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0,i+=((o=(o<<11|o>>>21)+r|0)^r^n)+t[3]-722521979|0,n+=((i=(i<<16|i>>>16)+o|0)^o^r)+t[6]+76029189|0,r+=((n=(n<<23|n>>>9)+i|0)^i^o)+t[9]-640364487|0,o+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0,i+=((o=(o<<11|o>>>21)+r|0)^r^n)+t[15]+530742520|0,n+=((i=(i<<16|i>>>16)+o|0)^o^r)+t[2]-995338651|0,n=(n<<23|n>>>9)+i|0,r+=(i^(n|~o))+t[0]-198630844|0,r=(r<<6|r>>>26)+n|0,o+=(n^(r|~i))+t[7]+1126891415|0,o=(o<<10|o>>>22)+r|0,i+=(r^(o|~n))+t[14]-1416354905|0,i=(i<<15|i>>>17)+o|0,n+=(o^(i|~r))+t[5]-57434055|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~o))+t[12]+1700485571|0,r=(r<<6|r>>>26)+n|0,o+=(n^(r|~i))+t[3]-1894986606|0,o=(o<<10|o>>>22)+r|0,i+=(r^(o|~n))+t[10]-1051523|0,i=(i<<15|i>>>17)+o|0,n+=(o^(i|~r))+t[1]-2054922799|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~o))+t[8]+1873313359|0,r=(r<<6|r>>>26)+n|0,o+=(n^(r|~i))+t[15]-30611744|0,o=(o<<10|o>>>22)+r|0,i+=(r^(o|~n))+t[6]-1560198380|0,i=(i<<15|i>>>17)+o|0,n+=(o^(i|~r))+t[13]+1309151649|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~o))+t[4]-145523070|0,r=(r<<6|r>>>26)+n|0,o+=(n^(r|~i))+t[11]-1120210379|0,o=(o<<10|o>>>22)+r|0,i+=(r^(o|~n))+t[2]+718787259|0,i=(i<<15|i>>>17)+o|0,n+=(o^(i|~r))+t[9]-343485551|0,n=(n<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function md5blk(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function md5blk_array(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function md51(e){var t,r,n,i,o,s,a=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)md5cycle(u,md5blk(e.substring(t-64,t)));for(r=(e=e.substring(t-64)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(md5cycle(u,n),t=0;t<16;t+=1)n[t]=0;return o=parseInt((i=(i=8*a).toString(16).match(/(.*?)(.{0,8})$/))[2],16),s=parseInt(i[1],16)||0,n[14]=o,n[15]=s,md5cycle(u,n),u}function hex(e){var r;for(r=0;r<e.length;r+=1)e[r]=function(e){var r,n="";for(r=0;r<4;r+=1)n+=t[e>>8*r+4&15]+t[e>>8*r&15];return n}(e[r]);return e.join("")}function toUtf8(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function hexToBinaryString(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function SparkMD5(){this.reset()}return hex(md51("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function clamp(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(e,t){var r,n,i,o,s=this.byteLength,a=clamp(e,s),u=s;return(void 0!==t&&(u=clamp(t,s)),a>u)?new ArrayBuffer(0):(r=u-a,n=new ArrayBuffer(r),i=new Uint8Array(n),o=new Uint8Array(this,a,r),i.set(o),n)}}(),SparkMD5.prototype.append=function(e){return this.appendBinary(toUtf8(e)),this},SparkMD5.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;t<=r;t+=64)md5cycle(this._hash,md5blk(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},SparkMD5.prototype.end=function(e){var t,r,n=this._buff,i=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),r=hex(this._hash),e&&(r=hexToBinaryString(r)),this.reset(),r},SparkMD5.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},SparkMD5.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},SparkMD5.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},SparkMD5.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},SparkMD5.prototype._finish=function(e,t){var r,n,i,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(md5cycle(this._hash,e),o=0;o<16;o+=1)e[o]=0;n=parseInt((r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/))[2],16),i=parseInt(r[1],16)||0,e[14]=n,e[15]=i,md5cycle(this._hash,e)},SparkMD5.hash=function(e,t){return SparkMD5.hashBinary(toUtf8(e),t)},SparkMD5.hashBinary=function(e,t){var r=hex(md51(e));return t?hexToBinaryString(r):r},SparkMD5.ArrayBuffer=function(){this.reset()},SparkMD5.ArrayBuffer.prototype.append=function(e){var t,r,n,i=(t=this._buff.buffer,(r=new Uint8Array(t.byteLength+e.byteLength)).set(new Uint8Array(t)),r.set(new Uint8Array(e),t.byteLength),r),o=i.length;for(this._length+=e.byteLength,n=64;n<=o;n+=64)md5cycle(this._hash,md5blk_array(i.subarray(n-64,n)));return this._buff=new Uint8Array(n-64<o?i.buffer.slice(n-64):0),this},SparkMD5.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=n[t]<<(t%4<<3);return this._finish(o,i),r=hex(this._hash),e&&(r=hexToBinaryString(r)),this.reset(),r},SparkMD5.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},SparkMD5.ArrayBuffer.prototype.getState=function(){var e,t=SparkMD5.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},SparkMD5.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,n=e.length,i=new ArrayBuffer(n),o=new Uint8Array(i);for(r=0;r<n;r+=1)o[r]=e.charCodeAt(r);return t?o:i}(e.buff,!0),SparkMD5.prototype.setState.call(this,e)},SparkMD5.ArrayBuffer.prototype.destroy=SparkMD5.prototype.destroy,SparkMD5.ArrayBuffer.prototype._finish=SparkMD5.prototype._finish,SparkMD5.ArrayBuffer.hash=function(e,t){var r=hex(function(e){var t,r,n,i,o,s,a=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)md5cycle(u,md5blk_array(e.subarray(t-64,t)));for(r=(e=t-64<a?e.subarray(t-64):new Uint8Array(0)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(md5cycle(u,n),t=0;t<16;t+=1)n[t]=0;return o=parseInt((i=(i=8*a).toString(16).match(/(.*?)(.{0,8})$/))[2],16),s=parseInt(i[1],16)||0,n[14]=o,n[15]=s,md5cycle(u,n),u}(new Uint8Array(e)));return t?hexToBinaryString(r):r},SparkMD5}()},78419:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasCORS=void 0;let r=!1;try{r="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}t.hasCORS=r},75754:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0,t.encode=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){let t={},r=e.split("&");for(let e=0,n=r.length;e<n;e++){let n=r[e].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}},75222:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;let r=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.parse=function(e){let t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));let s=r.exec(e||""),a={},u=14;for(;u--;)a[n[u]]=s[u]||"";return -1!=i&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){let r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,a.path),a.queryKey=function(e,t){let r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(r[t]=n)}),r}(0,a.query),a}},68726:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.yeast=t.decode=t.encode=void 0;let r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),n={},i=0,o=0,s;function encode(e){let t="";do t=r[e%64]+t,e=Math.floor(e/64);while(e>0);return t}for(t.encode=encode,t.decode=function(e){let t=0;for(o=0;o<e.length;o++)t=64*t+n[e.charAt(o)];return t},t.yeast=function(){let e=encode(+new Date);return e!==s?(i=0,s=e):e+"."+encode(i++)};o<64;o++)n[r[o]]=o},46242:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalThisShim=void 0,t.globalThisShim="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},74679:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nextTick=t.parse=t.installTimerFunctions=t.transports=t.Transport=t.protocol=t.Socket=void 0;let n=r(93481);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return n.Socket}}),t.protocol=n.Socket.protocol;var i=r(29870);Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return i.Transport}});var o=r(7385);Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return o.transports}});var s=r(89622);Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return s.installTimerFunctions}});var a=r(75222);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return a.parse}});var u=r(45552);Object.defineProperty(t,"nextTick",{enumerable:!0,get:function(){return u.nextTick}})},93481:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;let i=r(7385),o=r(89622),s=r(75754),a=r(75222),u=n(r(11227)),c=r(95260),l=r(1373),h=r(45552),p=(0,u.default)("engine.io-client:socket");let Socket=class Socket extends c.Emitter{constructor(e,t={}){super(),this.binaryType=h.defaultBinaryType,this.writeBuffer=[],e&&"object"==typeof e&&(t=e,e=null),e?(e=(0,a.parse)(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=(0,a.parse)(t.host).host),(0,o.installTimerFunctions)(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=(0,s.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){p('creating transport "%s"',e);let t=Object.assign({},this.opts.query);t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id);let r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return p("options: %j",r),new i.transports[e](r)}open(){let e;if(this.opts.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(e){p("error while creating transport: %s",e),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){p("setting transport %s",e.name),this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(e){p('probing transport "%s"',e);let t=this.createTransport(e),r=!1;Socket.priorWebsocketSuccess=!1;let onTransportOpen=()=>{r||(p('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",n=>{if(!r){if("pong"===n.type&&"probe"===n.data)p('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",t),t&&(Socket.priorWebsocketSuccess="websocket"===t.name,p('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{r||"closed"===this.readyState||(p("changing transport and sending upgrade packet"),cleanup(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}));else{p('probe transport "%s" failed',e);let r=Error("probe error");r.transport=t.name,this.emitReserved("upgradeError",r)}}}))};function freezeTransport(){r||(r=!0,cleanup(),t.close(),t=null)}let onerror=r=>{let n=Error("probe error: "+r);n.transport=t.name,freezeTransport(),p('probe transport "%s" failed because of error: %s',e,r),this.emitReserved("upgradeError",n)};function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(e){t&&e.name!==t.name&&(p('"%s" works - aborting "%s"',e.name,t.name),freezeTransport())}let cleanup=()=>{t.removeListener("open",onTransportOpen),t.removeListener("error",onerror),t.removeListener("close",onTransportClose),this.off("close",onclose),this.off("upgrading",onupgrade)};t.once("open",onTransportOpen),t.once("error",onerror),t.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onOpen(){if(p("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){p("starting upgrade probes");let e=0,t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(p('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let t=Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}else p('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this.getWritablePackets();p("flushing %d packets in socket",e.length),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){let e=this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1;if(!e)return this.writeBuffer;let t=1;for(let e=0;e<this.writeBuffer.length;e++){let r=this.writeBuffer[e].data;if(r&&(t+=(0,o.byteLength)(r)),e>0&&t>this.maxPayload)return p("only send %d out of %d packets",e,this.writeBuffer.length),this.writeBuffer.slice(0,e);t+=2}return p("payload size is %d (max: %d)",t,this.maxPayload),this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;let i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){let close=()=>{this.onClose("forced close"),p("socket closing - telling transport to close"),this.transport.close()},cleanupAndClose=()=>{this.off("upgrade",cleanupAndClose),this.off("upgradeError",cleanupAndClose),close()},waitForUpgrade=()=>{this.once("upgrade",cleanupAndClose),this.once("upgradeError",cleanupAndClose)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?waitForUpgrade():close()}):this.upgrading?waitForUpgrade():close()),this}onError(e){p("socket error %j",e),Socket.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(p('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let t=[],r=0,n=e.length;for(;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}};t.Socket=Socket,Socket.protocol=l.protocol},29870:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;let i=r(1373),o=r(95260),s=r(89622),a=n(r(11227)),u=r(75754),c=(0,a.default)("engine.io-client:transport");let TransportError=class TransportError extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}};let Transport=class Transport extends o.Emitter{constructor(e){super(),this.writable=!1,(0,s.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new TransportError(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):c("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=(0,i.decodePacket)(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=(0,u.encode)(e);return t.length?"?"+t:""}};t.Transport=Transport},7385:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transports=void 0;let n=r(40484),i=r(51308),o=r(31020);t.transports={websocket:i.WS,webtransport:o.WT,polling:n.Polling}},40484:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.Polling=void 0;let i=r(29870),o=n(r(11227)),s=r(68726),a=r(1373),u=r(26666),c=r(95260),l=r(89622),h=r(46242),p=(0,o.default)("engine.io-client:polling");function empty(){}let d=function(){let e=new u.XHR({xdomain:!1});return null!=e.responseType}();let Polling=class Polling extends i.Transport{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){let t="https:"===location.protocol,r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}let t=e&&e.forceBase64;this.supportsBinary=d&&!t,this.opts.withCredentials&&(this.cookieJar=(0,u.createCookieJar)())}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let pause=()=>{p("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(p("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){p("pre-pause polling complete"),--e||pause()})),this.writable||(p("we are currently writing - waiting to pause"),e++,this.once("drain",function(){p("pre-pause writing complete"),--e||pause()}))}else pause()}poll(){p("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){p("polling got data %s",e),(0,a.decodePayload)(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))}doClose(){let close=()=>{p("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(p("transport open - closing"),close()):(p("transport not open - deferring close"),this.once("open",close))}write(e){this.writable=!1,(0,a.encodePayload)(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,s.yeast)()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Request(this.uri(),e)}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){p("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}};t.Polling=Polling;let Request=class Request extends c.Emitter{constructor(e,t){super(),(0,l.installTimerFunctions)(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e;let t=(0,l.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;let r=this.xhr=new u.XHR(t);try{p("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(let e in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this.opts.extraHeaders[e])}catch(e){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this.opts.cookieJar)||void 0===e||e.parseCookies(r)),4===r.readyState&&(200===r.status||1223===r.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof r.status?r.status:0)},0))},p("xhr data %s",this.data),r.send(this.data)}catch(e){this.setTimeoutFn(()=>{this.onError(e)},0);return}"undefined"!=typeof document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=empty,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Request.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};if(t.Request=Request,Request.requestsCount=0,Request.requests={},"undefined"!=typeof document){if("function"==typeof attachEvent)attachEvent("onunload",unloadHandler);else if("function"==typeof addEventListener){let e="onpagehide"in h.globalThisShim?"pagehide":"unload";addEventListener(e,unloadHandler,!1)}}function unloadHandler(){for(let e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}},45552:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBinaryType=t.usingBrowserWebSocket=t.WebSocket=t.nextTick=void 0;let n=r(46242);t.nextTick=(()=>{let e="function"==typeof Promise&&"function"==typeof Promise.resolve;return e?e=>Promise.resolve().then(e):(e,t)=>t(e,0)})(),t.WebSocket=n.globalThisShim.WebSocket||n.globalThisShim.MozWebSocket,t.usingBrowserWebSocket=!0,t.defaultBinaryType="arraybuffer"},51308:function(e,t,r){"use strict";var n=r(48764).lW,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WS=void 0;let o=r(29870),s=r(68726),a=r(89622),u=r(45552),c=i(r(11227)),l=r(1373),h=(0,c.default)("engine.io-client:websocket"),p="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();let WS=class WS extends o.Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),t=this.opts.protocols,r=p?{}:(0,a.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=u.usingBrowserWebSocket&&!p?t?new u.WebSocket(e,t):new u.WebSocket(e):new u.WebSocket(e,t,r)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],i=t===e.length-1;(0,l.encodePacket)(r,this.supportsBinary,e=>{let t={};if(!u.usingBrowserWebSocket&&(r.options&&(t.compress=r.options.compress),this.opts.perMessageDeflate)){let r="string"==typeof e?n.byteLength(e):e.length;r<this.opts.perMessageDeflate.threshold&&(t.compress=!1)}try{u.usingBrowserWebSocket?this.ws.send(e):this.ws.send(e,t)}catch(e){h("websocket closed before onclose event")}i&&(0,u.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,s.yeast)()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!u.WebSocket}};t.WS=WS},31020:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WT=void 0;let i=r(29870),o=r(45552),s=r(1373),a=n(r(11227)),u=(0,a.default)("engine.io-client:webtransport");let WT=class WT extends i.Transport{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{u("transport closed gracefully"),this.onClose()}).catch(e=>{u("transport closed due to %s",e),this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{let t=(0,s.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),n=(0,s.createPacketEncoderStream)();n.readable.pipeTo(e.writable),this.writer=n.writable.getWriter();let read=()=>{r.read().then(({done:e,value:t})=>{if(e){u("session is closed");return}u("received chunk: %o",t),this.onPacket(t),read()}).catch(e=>{u("an error occurred while reading: %s",e)})};read();let i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this.writer.write(i).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;this.writer.write(r).then(()=>{n&&(0,o.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this.transport)||void 0===e||e.close()}};t.WT=WT},26666:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCookieJar=t.XHR=void 0;let n=r(78419),i=r(46242);t.XHR=function(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n.hasCORS))return new XMLHttpRequest}catch(e){}if(!t)try{return new i.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}},t.createCookieJar=function(){}},89622:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.byteLength=t.installTimerFunctions=t.pick=void 0;let n=r(46242);t.pick=function(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})};let i=n.globalThisShim.setTimeout,o=n.globalThisShim.clearTimeout;t.installTimerFunctions=function(e,t){t.useNativeTimers?(e.setTimeoutFn=i.bind(n.globalThisShim),e.clearTimeoutFn=o.bind(n.globalThisShim)):(e.setTimeoutFn=n.globalThisShim.setTimeout.bind(n.globalThisShim),e.clearTimeoutFn=n.globalThisShim.clearTimeout.bind(n.globalThisShim))},t.byteLength=function(e){return"string"==typeof e?function(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))}},83087:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_PACKET=t.PACKET_TYPES_REVERSE=t.PACKET_TYPES=void 0;let r=Object.create(null);t.PACKET_TYPES=r,r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6";let n=Object.create(null);t.PACKET_TYPES_REVERSE=n,Object.keys(r).forEach(e=>{n[r[e]]=e}),t.ERROR_PACKET={type:"error",data:"parser error"}},82469:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<r.length;e++)n[r.charCodeAt(e)]=e;t.encode=e=>{let t=new Uint8Array(e),n,i=t.length,o="";for(n=0;n<i;n+=3)o+=r[t[n]>>2]+r[(3&t[n])<<4|t[n+1]>>4]+r[(15&t[n+1])<<2|t[n+2]>>6]+r[63&t[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=e=>{let t=.75*e.length,r=e.length,i,o=0,s,a,u,c;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let l=new ArrayBuffer(t),h=new Uint8Array(l);for(i=0;i<r;i+=4)s=n[e.charCodeAt(i)],a=n[e.charCodeAt(i+1)],u=n[e.charCodeAt(i+2)],c=n[e.charCodeAt(i+3)],h[o++]=s<<2|a>>4,h[o++]=(15&a)<<4|u>>2,h[o++]=(3&u)<<6|63&c;return l}},17572:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodePacket=void 0;let n=r(83087),i=r(82469),o="function"==typeof ArrayBuffer;t.decodePacket=(e,t)=>{if("string"!=typeof e)return{type:"message",data:mapBinary(e,t)};let r=e.charAt(0);if("b"===r)return{type:"message",data:decodeBase64Packet(e.substring(1),t)};let i=n.PACKET_TYPES_REVERSE[r];return i?e.length>1?{type:n.PACKET_TYPES_REVERSE[r],data:e.substring(1)}:{type:n.PACKET_TYPES_REVERSE[r]}:n.ERROR_PACKET};let decodeBase64Packet=(e,t)=>{if(!o)return{base64:!0,data:e};{let r=(0,i.decode)(e);return mapBinary(r,t)}},mapBinary=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer},83908:function(e,t,r){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.encodePacket=t.encodePacketToBinary=void 0;let i=r(83087),o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"==typeof ArrayBuffer,isView=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,encodePacket=({type:e,data:t},r,n)=>o&&t instanceof Blob?r?n(t):encodeBlobAsBase64(t,n):s&&(t instanceof ArrayBuffer||isView(t))?r?n(t):encodeBlobAsBase64(new Blob([t]),n):n(i.PACKET_TYPES[e]+(t||""));t.encodePacket=encodePacket;let encodeBlobAsBase64=(e,t)=>{let r=new FileReader;return r.onload=function(){let e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function toArray(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}t.encodePacketToBinary=function(e,t){return o&&e.data instanceof Blob?e.data.arrayBuffer().then(toArray).then(t):s&&(e.data instanceof ArrayBuffer||isView(e.data))?t(toArray(e.data)):void encodePacket(e,!1,e=>{n||(n=new TextEncoder),t(n.encode(e))})}},1373:function(e,t,r){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacket=t.protocol=t.createPacketDecoderStream=t.createPacketEncoderStream=void 0;let i=r(83908);Object.defineProperty(t,"encodePacket",{enumerable:!0,get:function(){return i.encodePacket}});let o=r(17572);Object.defineProperty(t,"decodePacket",{enumerable:!0,get:function(){return o.decodePacket}});let s=r(83087);function totalLength(e){return e.reduce((e,t)=>e+t.length,0)}function concatChunks(e,t){if(e[0].length===t)return e.shift();let r=new Uint8Array(t),n=0;for(let i=0;i<t;i++)r[i]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}t.encodePayload=(e,t)=>{let r=e.length,n=Array(r),o=0;e.forEach((e,s)=>{(0,i.encodePacket)(e,!1,e=>{n[s]=e,++o===r&&t(n.join("\x1e"))})})},t.decodePayload=(e,t)=>{let r=e.split("\x1e"),n=[];for(let e=0;e<r.length;e++){let i=(0,o.decodePacket)(r[e],t);if(n.push(i),"error"===i.type)break}return n},t.createPacketEncoderStream=function(){return new TransformStream({transform(e,t){(0,i.encodePacketToBinary)(e,r=>{let n;let i=r.length;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);let e=new DataView(n.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{n=new Uint8Array(9);let e=new DataView(n.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})},t.createPacketDecoderStream=function(e,t){n||(n=new TextDecoder);let r=[],i=0,a=-1,u=!1;return new TransformStream({transform(c,l){for(r.push(c);;){if(0===i){if(1>totalLength(r))break;let e=concatChunks(r,1);u=(128&e[0])==128,i=(a=127&e[0])<126?3:126===a?1:2}else if(1===i){if(2>totalLength(r))break;let e=concatChunks(r,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(8>totalLength(r))break;let e=concatChunks(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>2097151){l.enqueue(s.ERROR_PACKET);break}a=4294967296*n+t.getUint32(4),i=3}else{if(totalLength(r)<a)break;let e=concatChunks(r,a);l.enqueue((0,o.decodePacket)(u?e:n.decode(e),t)),i=0}if(0===a||a>e){l.enqueue(s.ERROR_PACKET);break}}}})},t.protocol=4},15159:function(e,t){"use strict";function Backoff(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Object.defineProperty(t,"__esModule",{value:!0}),t.Backoff=void 0,t.Backoff=Backoff,Backoff.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-r:e+r}return 0|Math.min(e,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e}},57046:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.connect=t.io=t.Socket=t.Manager=t.protocol=void 0;let i=r(3084),o=r(84168);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return o.Manager}});let s=r(98312);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return s.Socket}});let a=n(r(11227)),u=a.default("socket.io-client"),c={};function lookup(e,t){let r;"object"==typeof e&&(t=e,e=void 0),t=t||{};let n=i.url(e,t.path||"/socket.io"),s=n.source,a=n.id,l=n.path,h=c[a]&&l in c[a].nsps,p=t.forceNew||t["force new connection"]||!1===t.multiplex||h;return p?(u("ignoring socket cache for %s",s),r=new o.Manager(s,t)):(c[a]||(u("new io instance for %s",s),c[a]=new o.Manager(s,t)),r=c[a]),n.query&&!t.query&&(t.query=n.queryKey),r.socket(n.path,t)}t.io=lookup,t.connect=lookup,t.default=lookup,Object.assign(lookup,{Manager:o.Manager,Socket:s.Socket,io:lookup,connect:lookup});var l=r(64514);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return l.protocol}}),e.exports=lookup},84168:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;let a=r(74679),u=r(98312),c=o(r(64514)),l=r(87149),h=r(15159),p=r(95260),d=s(r(11227)),f=d.default("socket.io-client:manager");let Manager=class Manager extends p.Emitter{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,a.installTimerFunctions(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new h.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let n=t.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(f("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=new a.Socket(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let n=l.on(t,"open",function(){r.onopen(),e&&e()}),onError=t=>{f("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=l.on(t,"error",onError);if(!1!==this._timeout){let e=this._timeout;f("connect attempt will timeout after %d",e);let r=this.setTimeoutFn(()=>{f("connect attempt timed out after %d",e),n(),onError(Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(n),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){f("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(l.on(e,"ping",this.onping.bind(this)),l.on(e,"data",this.ondata.bind(this)),l.on(e,"error",this.onerror.bind(this)),l.on(e,"close",this.onclose.bind(this)),l.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){a.nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){f("error",e),this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new u.Socket(this,e,t),this.nsps[e]=r),r}_destroy(e){let t=Object.keys(this.nsps);for(let e of t){let t=this.nsps[e];if(t.active){f("socket %s is still active, skipping close",e);return}}this._close()}_packet(e){f("writing packet %j",e);let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){f("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){f("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){f("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();f("will wait %dms before reconnect attempt",t),this._reconnecting=!0;let r=this.setTimeoutFn(()=>{!e.skipReconnect&&(f("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(f("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(f("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};t.Manager=Manager},87149:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,r){return e.on(t,r),function(){e.off(t,r)}}},98312:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;let i=r(64514),o=r(87149),s=r(95260),a=n(r(11227)),u=a.default("socket.io-client:socket"),c=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});let Socket=class Socket extends s.Emitter{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[o.on(e,"open",this.onopen.bind(this)),o.on(e,"packet",this.onpacket.bind(this)),o.on(e,"error",this.onerror.bind(this)),o.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(c.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let r={type:i.PacketType.EVENT,data:t};if(r.options={},r.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++;u("emitting packet with ack id %d",e);let n=t.pop();this._registerAckCallback(e,n),r.id=e}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,o=this.flags.volatile&&(!n||!this.connected);return o?u("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r),this.flags={},this}_registerAckCallback(e,t){var r;let n=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===n){this.acks[e]=t;return}let i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&(u("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(t,1));u("event with ack id %d has timed out after %d ms",e,n),t.call(this,Error("operation has timed out"))},n);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,[null,...e])}}emitWithAck(e,...t){let r=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((n,i)=>{t.push((e,t)=>r?e?i(e):n(t):n(e)),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...n)=>{if(r!==this._queue[0])return;let i=null!==e;return i?r.tryCount>this._opts.retries&&(u("packet [%d] is discarded after %d tries",r.id,r.tryCount),this._queue.shift(),t&&t(e)):(u("packet [%d] was successfully sent",r.id),this._queue.shift(),t&&t(null,...n)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(u("draining queue"),!this.connected||0===this._queue.length)return;let t=this._queue[0];if(t.pending&&!e){u("packet [%d] has already been sent and is waiting for an ack",t.id);return}t.pending=!0,t.tryCount++,u("sending packet [%d] (try n\xb0%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){u("transport is open - connecting"),"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:i.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){u("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){let t=e.nsp===this.nsp;if(t)switch(e.type){case i.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case i.PacketType.EVENT:case i.PacketType.BINARY_EVENT:this.onevent(e);break;case i.PacketType.ACK:case i.PacketType.BINARY_ACK:this.onack(e);break;case i.PacketType.DISCONNECT:this.ondisconnect();break;case i.PacketType.CONNECT_ERROR:this.destroy();let r=Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r)}}onevent(e){let t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let t=this._anyListeners.slice();for(let r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...n){r||(r=!0,u("sending ack %j",n),t.packet({type:i.PacketType.ACK,id:e,data:n}))}}onack(e){let t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)}onconnect(e,t){u("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let t=this._anyOutgoingListeners.slice();for(let r of t)r.apply(this,e.data)}}};t.Socket=Socket},3084:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;let i=r(74679),o=n(r(11227)),s=o.default("socket.io-client:url");t.url=function(e,t="",r){let n=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(s("protocol-less url %s",e),e=void 0!==r?r.protocol+"//"+e:"https://"+e),s("parse %s",e),n=i.parse(e)),!n.port&&(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let o=-1!==n.host.indexOf(":"),a=o?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}},94880:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;let n=r(90665);t.deconstructPacket=function(e){let t=[],r=e.data;return e.data=function _deconstructPacket(e,t){if(!e)return e;if((0,n.isBinary)(e)){let r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){let r=Array(e.length);for(let n=0;n<e.length;n++)r[n]=_deconstructPacket(e[n],t);return r}if("object"==typeof e&&!(e instanceof Date)){let r={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=_deconstructPacket(e[n],t));return r}return e}(r,t),e.attachments=t.length,{packet:e,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function _reconstructPacket(e,t){if(!e)return e;if(e&&!0===e._placeholder){let r="number"==typeof e.num&&e.num>=0&&e.num<t.length;if(r)return t[e.num];throw Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=_reconstructPacket(e[r],t);else if("object"==typeof e)for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=_reconstructPacket(e[r],t));return e}(e.data,t),delete e.attachments,e}},64514:function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;let o=r(95260),s=r(94880),a=r(90665),u=r(11227),c=(0,u.default)("socket.io-parser"),l=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}t.protocol=5,(i=n=t.PacketType||(t.PacketType={}))[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",t.Encoder=class{constructor(e){this.replacer=e}encode(e){return(c("encoding packet %j",e),(e.type===n.EVENT||e.type===n.ACK)&&(0,a.hasBinary)(e))?this.encodeAsBinary({type:e.type===n.EVENT?n.BINARY_EVENT:n.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===n.BINARY_EVENT||e.type===n.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),c("encoded %j as %s",e,t),t}encodeAsBinary(e){let t=(0,s.deconstructPacket)(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}};let Decoder=class Decoder extends o.Emitter{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);let r=t.type===n.BINARY_EVENT;r||t.type===n.BINARY_ACK?(t.type=r?n.EVENT:n.ACK,this.reconstructor=new BinaryReconstructor(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if((0,a.isBinary)(e)||e.base64){if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if(void 0===n[r.type])throw Error("unknown packet type "+r.type);if(r.type===n.BINARY_EVENT||r.type===n.BINARY_ACK){let n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let i=e.substring(n,t);if(i!=Number(i)||"-"!==e.charAt(t))throw Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){let n=t+1;for(;++t;){let r=e.charAt(t);if(","===r||t===e.length)break}r.nsp=e.substring(n,t)}else r.nsp="/";let i=e.charAt(t+1);if(""!==i&&Number(i)==i){let n=t+1;for(;++t;){let r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){let n=this.tryParse(e.substr(t));if(Decoder.isPayloadValid(r.type,n))r.data=n;else throw Error("invalid payload")}return c("decoded %s as %j",e,r),r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case n.CONNECT:return isObject(t);case n.DISCONNECT:return void 0===t;case n.CONNECT_ERROR:return"string"==typeof t||isObject(t);case n.EVENT:case n.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===l.indexOf(t[0]));case n.ACK:case n.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};t.Decoder=Decoder;let BinaryReconstructor=class BinaryReconstructor{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let e=(0,s.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},90665:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;let r="function"==typeof ArrayBuffer,isView=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,n=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);function isBinary(e){return r&&(e instanceof ArrayBuffer||isView(e))||i&&e instanceof Blob||o&&e instanceof File}t.isBinary=isBinary,t.hasBinary=function hasBinary(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(hasBinary(e[t]))return!0;return!1}if(isBinary(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1==arguments.length)return hasBinary(e.toJSON(),!0);for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&hasBinary(e[t]))return!0;return!1}},59108:function(e,t,r){"use strict";r.d(t,{v4:function(){return v4}});for(var n,i=256,o=[];i--;)o[i]=(i+256).toString(16).substring(1);function v4(){var e,t=0,r="";if(!n||i+16>256){for(n=Array(t=256);t--;)n[t]=256*Math.random()|0;t=i=0}for(;t<16;t++)e=n[i+t],6==t?r+=o[15&e|64]:8==t?r+=o[63&e|128]:r+=o[e],1&t&&t>1&&t<11&&(r+="-");return i++,r}},95260:function(e,t,r){"use strict";function Emitter(e){if(e)return function(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}(e)}r.r(t),r.d(t,{Emitter:function(){return Emitter}}),Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function on(){this.off(e,on),t.apply(this,arguments)}return on.fn=t,this.on(e,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this},Emitter.prototype.emitReserved=Emitter.prototype.emit,Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length}},96475:function(e,t,r){"use strict";function dset(e,t,r){t.split&&(t=t.split("."));for(var n,i,o=0,s=t.length,a=e;o<s&&"__proto__"!==(i=t[o++])&&"constructor"!==i&&"prototype"!==i;)a=a[i]=o===s?r:typeof(n=a[i])==typeof t?n:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}r.d(t,{N:function(){return dset}})}}]);